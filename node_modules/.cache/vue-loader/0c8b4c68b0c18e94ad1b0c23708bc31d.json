{"remainingRequest":"C:\\Users\\86151\\Desktop\\醉品茶城\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\86151\\Desktop\\醉品茶城\\vue_app_00\\src\\components\\xz\\Cart.vue?vue&type=style&index=0&id=1a6f731a&scoped=true&lang=css","dependencies":[{"path":"C:\\Users\\86151\\Desktop\\醉品茶城\\vue_app_00\\src\\components\\xz\\Cart.vue","mtime":1565685080912},{"path":"C:\\Users\\86151\\Desktop\\醉品茶城\\vue_app_00\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"C:\\Users\\86151\\Desktop\\醉品茶城\\vue_app_00\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907988000},{"path":"C:\\Users\\86151\\Desktop\\醉品茶城\\vue_app_00\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\86151\\Desktop\\醉品茶城\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\86151\\Desktop\\醉品茶城\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n /*最外层弹性布局*/\n.cart-item{\n display:flex;/*弹性布局*/\n justify-content:space-between;\n align-items:center;/*垂直居中*/\n border-bottom:1px solid #ccc;\n}\n.leftImgText{\n  /*默认子元素水平对齐*/\n  display:flex;\n  align-items:center;/*垂直居中*/\n}\n.leftImgText img{\n  width:50px;\n  height:50px;\n}\n.price{\n  margin-left:25px;\n}\n",{"version":3,"sources":["Cart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Cart.vue","sourceRoot":"src\\components\\xz","sourcesContent":["<template>\r\n   <!--Cart.vue-->\r\n  <div class=\"cart\">\r\n    <div class=\"selectAll\">\r\n     <!--全选-->\r\n      全选\r\n     <input type=\"checkbox\" @change=\"selectAll\"/>\r\n    </div>\r\n    <div class=\"cart-item\" v-for=\"(item,i) of list\" :key=\"i\">\r\n     <!--商品列表 15:41-->\r\n     <div class=\"leftImgText\">\r\n       <input type=\"checkbox\" v-model=\"item.cb\"/>\r\n       <img :src=\"'http://127.0.0.1:3000//'+item.img_url\" />\r\n       <div class=\"price\">\r\n          <span>\r\n            {{item.price}}\r\n          </span>\r\n       </div>\r\n     </div>\r\n     <mt-button :data-id=\"item.id\" @click=\"delItem\"\r\n     >删除</mt-button>\r\n    </div>\r\n    <div>\r\n    <!--删除选中商品-->\r\n      <mt-button @click=\"delAll\">\r\n       删除选中商品\r\n      </mt-button>\r\n      <h3>\r\n        购物车数量:\r\n        <span style=\"color:red\">\r\n        {{$store.getters.\r\n        getCartCount}}\r\n        </span>\r\n      </h3>\r\n    </div>\r\n  </div>  \r\n</template>\r\n<script>\r\n  export default {\r\n    data(){\r\n      return {\r\n        list:[]\r\n      }\r\n    },\r\n    created() {\r\n      this.loadMore();\r\n    },\r\n    methods:{\r\n     delAll(){\r\n      //删除多个商品 1,2,3\r\n      //1:创建变量保存空字符串\r\n      var str = \"\";\r\n      //2:创建循环拼接字符串内容\r\n      for(var item of this.list){\r\n         if(item.cb){\r\n           str += item.id+\",\"\r\n         }\r\n      }\r\n      //截取最后逗号之前内容\r\n      str = str.substring(0,str.length-1);\r\n      //3:判断如果用户没选商品提示\r\n      if(str.length==0){\r\n       this.$toast(\"请选中商品\");\r\n       return;\r\n      }\r\n      //4:发送ajax请求404\r\n      var url = \"delAll\";\r\n      var obj = {ids:str};\r\n      this.axios.get(url,{params:obj}).then(result=>{\r\n        //获取没有删除商品\r\n        this.loadMore();\r\n      });\r\n      //5:重新加载数据\r\n     },\r\n     delItem(e){\r\n     //1:获取当前商品id\r\n     var id = e.target.dataset.id;\r\n     //2:显示交互确认框 27\r\n     //3:如果用户选择 \"确认\"\r\n     this.$messagebox.confirm(\"是否删除指定数据\").then(action=>{\r\n        var url = \"delItem\";\r\n        var obj = {id:id};\r\n        this.axios.get(url,{params:obj}).then(result=>{\r\n          //重新加载数据相当刷新\r\n          this.loadMore();\r\n        })\r\n     }).catch(err=>{\r\n       return;\r\n     })\r\n\r\n     //4:发送ajax删除数据\r\n     //5:如果用户选择 \"取消\"\r\n      },\r\n      selectAll(e){\r\n     //全选按钮状态\r\n     var cb =  e.target.checked;\r\n     //依据状态修改列表cb\r\n     for(var item of this.list){\r\n        item.cb = cb;\r\n     }\r\n       \r\n\r\n      },\r\n     loadMore(){\r\n     this.$store.commit(\"clear\");\r\n        //1:创建url\r\n        var url = \"cart\";\r\n        //2:发送ajax请求\r\n        this.axios.get(url).then(result=>{\r\n          //this.list = //result.data.data;\r\n          //1:获取服务器数组\r\n          var rows = result.data.data;\r\n          //2:创建循环为数组中每个//对象添加cb属性\r\n          //cb控制商品前复选框\r\n          for(var item of rows){\r\n           //2.1:添加cb属性\r\n           item.cb = false;\r\n           //2.2:更新购物车数量\r\n           this.$store.commit(\"increment\");\r\n          }\r\n          //3:将新数据保存\r\n          this.list = rows;\r\n        })\r\n      }\r\n    }\r\n  }  \r\n</script>\r\n<style scoped>\r\n  /*最外层弹性布局*/\r\n .cart-item{\r\n  display:flex;/*弹性布局*/\r\n  justify-content:space-between;\r\n  align-items:center;/*垂直居中*/\r\n  border-bottom:1px solid #ccc;\r\n }\r\n .leftImgText{\r\n   /*默认子元素水平对齐*/\r\n   display:flex;\r\n   align-items:center;/*垂直居中*/\r\n }\r\n .leftImgText img{\r\n   width:50px;\r\n   height:50px;\r\n }\r\n .price{\r\n   margin-left:25px;\r\n }\r\n</style>"]}]}