{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\waimao\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\waimao\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\waimao\\vue_app_00\\src\\components\\waimao\\home\\setuser.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\waimao\\vue_app_00\\src\\components\\waimao\\home\\setuser.vue","mtime":1574677027547},{"path":"C:\\Users\\Administrator\\Desktop\\waimao\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\Administrator\\Desktop\\waimao\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"C:\\Users\\Administrator\\Desktop\\waimao\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//这里可以导入其他文件（比如：组件，工具js，第三方插件js，json文件，图片文件等等）\n//例如：import 《组件名称》 from '《组件路径》';\nimport VDistpicker from 'v-distpicker';\nexport default {\n  //import引入的组件需要注入到对象中才能使用\n  components: {},\n  data: function data() {\n    //这里存放数据\n    return {\n      //\n      files: [],\n      // 用户名\n      userName: \"\",\n      // 上传文件地址\n      fileList: [],\n      // 省份\n      province: \"\",\n      // 城市\n      city: \"\",\n      // 地区\n      area: \"\",\n      formInline: {\n        user: '',\n        region: ''\n      },\n      // 地址选择器\n      select: {\n        province: '',\n        city: '',\n        area: ''\n      },\n      // \n      form: {\n        // 客户类型\n        type: \"\",\n        // 联系人\n        username: \"\",\n        // 业务类型\n        type2: \"\",\n        // 联系电话\n        userphone: \"\",\n        // 单位名称\n        com: \"\",\n        // 微信\n        userwx: \"\",\n        // 单位代码\n        code: \"\",\n        // whatAPP\n        userwhat: \"\",\n        // Facebook\n        userface: \"\",\n        // 详细地址\n        address: \"\",\n        // 邮箱\n        email: \"\"\n      }\n    };\n  },\n  //监听属性 类似于data概念\n  computed: {},\n  //监控data中的数据变化\n  watch: {},\n  //方法集合\n  methods: {\n    getFileName: function getFileName() {},\n    upsuc: function upsuc(e) {\n      console.log('上传成功', e);\n      this.files.push(e.data);\n      this.look = e.data.full_path;\n      console.log('查看的地址', this.look); // this.sp.push(e.data.path('_'))\n      // 为原数组添加新的下标\n\n      this.files.forEach(function (item, index) {\n        item.num = index + 1;\n        item.type = 5;\n      });\n      var r2 = JSON.parse(JSON.stringify(e.data).replace(/file_name/g, 'name')); // 为原数组添加新的下标\n      // this.fileList.push(e.data)\n      // conso\n    },\n    // 上传文件\n    submitUpload: function submitUpload(file) {\n      this.$refs.upload.submit();\n    },\n    handleRemove: function handleRemove(file, fileList) {\n      console.log('删除的文件地址', file, '删除的文件路径', fileList, e); // this.files\n\n      for (var i in file) {\n        for (var m in this.files) {\n          if (file[i].name == this.files[m].file_name) {\n            this.files.splice(m, 1);\n          }\n        }\n      }\n    },\n    handlePreview: function handlePreview(file) {\n      console.log(file); // console.log(file.path+file.url);\n\n      if (file.response) {\n        window.open(file.response.data.full_path);\n      } else {\n        window.open(file.path + file.url);\n      } // return this\n\n    },\n    // 提交地区信息\n    sub: function sub(data) {\n      console.log(\"省份：\" + data.province.value);\n      console.log(\"市：\" + data.city.value);\n      console.log(\"地区：\" + data.area.value);\n      this.province = data.province.value;\n      this.city = data.city.value;\n      this.area = data.area.value;\n    },\n    // 提交所有信息\n    submit: function submit() {\n      var _this = this;\n\n      // var r3= JSON.parse(JSON.stringify(this.fileList).replace(/name/g, 'file_name'))\n      var Token = window.localStorage.getItem('token');\n      var that = this;\n      console.log('上传文件', this.fileList);\n      var user_id = that.user_id;\n      var form = that.form;\n      var type;\n\n      if (form.type == '中方客户') {\n        type = 1;\n      } else {\n        type = 2;\n      }\n\n      var type2;\n\n      if (form.t2 == '一般业务') {\n        type2 = 1;\n      } else {\n        type2 = 2;\n      }\n\n      var params = {\n        Token: Token,\n        customer_type: type,\n        name: form.username,\n        wechat: form.userwx,\n        corporate_name: form.com,\n        mobile: form.userphone,\n        what_app: form.userwhat,\n        corporate_code: form.code,\n        facebook: form.userface,\n        address: this.province + this.city + this.area + form.address,\n        // email:form.email,\n        // passwd:form.pwd,\n        role_id: 1,\n        user_type: type2,\n        user_id: that.user_id\n      };\n      this.$ajax.post('/auth/setUserInfo', params).then(function (res) {\n        console.log('请求修改用户结果', res);\n\n        if (res.data.code == 200) {\n          _this.$ajax.post('/tools/saveFile', {\n            user_id: user_id,\n            type: 5,\n            data: _this.files\n          }).then(function (res) {\n            console.log('上传修改文件结果', res);\n\n            if (res.data.code == 200) {\n              setTimeout(function () {\n                that.$router.push('/chinaUser');\n              }, 1500);\n            } else {\n              alert(res.data.msg);\n            }\n          }).catch(function (err) {\n            console.log('请求失败', err);\n          });\n        } else {\n          alert(res.data.msg);\n        }\n      }).catch(function (err) {\n        console.log('请求失败', err);\n      });\n    }\n  },\n  //生命周期 - 创建完成（可以访问当前this实例）\n  created: function created() {\n    var _this2 = this;\n\n    setTimeout(function () {\n      var Token = window.localStorage.getItem('token');\n      var that = _this2;\n      var params = {\n        Token: Token,\n        user_id: _this2.user_id\n      };\n\n      _this2.$ajax.post('/auth/getUserInfo', params).then(function (res) {\n        console.log('请求结果客户详情', res);\n\n        if (res.data.code == 200) {\n          var res = res.data.data.user;\n          var form = _this2.form;\n\n          if (res.customer_type == 1) {\n            var t1 = '中方客户';\n          } else {\n            var t1 = '外方客户';\n          }\n\n          form.type = t1;\n          form.username = res.name;\n          _this2.userName = res.name;\n\n          if (res.user_type == 1) {\n            var t2 = '一般业务';\n          } else {\n            var t2 = '融资业务';\n          }\n\n          form.type2 = t2;\n          form.userphone = res.mobile;\n          form.com = res.corporate_name;\n          form.userwx = res.wechat;\n          form.code = res.corporate_code;\n          form.userwhat = res.what_app;\n          form.userface = res.facebook;\n          /**\r\n           * 分割地址\r\n           */\n\n          form.address = res.address;\n        } else {\n          alert(res.data.msg);\n        }\n      }).catch(function (err) {\n        console.log('请求失败', err);\n      });\n      /**\r\n       * 获取上传文件列表\r\n       */\n\n\n      var Token = window.localStorage.getItem('token');\n      var that = _this2;\n      var params = {\n        Token: Token,\n        user_id: _this2.user_id,\n        type: 5\n      };\n\n      _this2.$ajax.post('/tools/getFile', params).then(function (res) {\n        console.log('请求文件列表结果', res);\n\n        if (res.data.code == 200) {\n          for (var i in res.data.data) {\n            var r2 = JSON.parse(JSON.stringify(res.data.data).replace(/file_name/g, 'name'));\n            console.log(r2);\n          }\n\n          _this2.fileList = r2;\n          _this2.files = res.data.data;\n        } else {\n          alert(res.data.msg);\n        }\n      }).catch(function (err) {\n        console.log('请求失败', err);\n      });\n    }, 1000);\n  },\n  //生命周期 - 挂载完成（可以访问DOM元素）\n  mounted: function mounted() {},\n  beforeCreate: function beforeCreate() {\n    this.user_id = this.$route.query.id;\n    console.log(this.user_id);\n  },\n  //生命周期 - 创建之前\n  beforeMount: function beforeMount() {},\n  //生命周期 - 挂载之前\n  beforeUpdate: function beforeUpdate() {},\n  //生命周期 - 更新之前\n  updated: function updated() {},\n  //生命周期 - 更新之后\n  beforeDestroy: function beforeDestroy() {},\n  //生命周期 - 销毁之前\n  destroyed: function destroyed() {},\n  //生命周期 - 销毁完成\n  activated: function activated() {}\n};",{"version":3,"sources":["setuser.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4HA;AACA;AACA,OAAA,WAAA,MAAA,cAAA;AACA,eAAA;AACA;AACA,cAAA,EAFA;AAGA,MAHA,kBAGA;AACA;AACA,WAAA;AACA;AACA,aAAA,EAFA;AAGA;AACA,gBAAA,EAJA;AAKA;AACA,gBAAA,EANA;AAOA;AACA,gBAAA,EARA;AASA;AACA,YAAA,EAVA;AAWA;AACA,YAAA,EAZA;AAaA,kBAAA;AACA,cAAA,EADA;AAEA,gBAAA;AAFA,OAbA;AAiBA;AACA,cAAA;AAAA,kBAAA,EAAA;AAAA,cAAA,EAAA;AAAA,cAAA;AAAA,OAlBA;AAmBA;AACA,YAAA;AACA;AACA,cAAA,EAFA;AAGA;AACA,kBAAA,EAJA;AAKA;AACA,eAAA,EANA;AAOA;AACA,mBAAA,EARA;AASA;AACA,aAAA,EAVA;AAWA;AACA,gBAAA,EAZA;AAaA;AACA,cAAA,EAdA;AAeA;AACA,kBAAA,EAhBA;AAiBA;AACA,kBAAA,EAlBA;AAmBA;AACA,iBAAA,EApBA;AAqBA;AACA,eAAA;AAtBA;AApBA,KAAA;AA6CA,GAlDA;AAmDA;AACA,YAAA,EApDA;AAqDA;AACA,SAAA,EAtDA;AAuDA;AACA,WAAA;AACA,eADA,yBACA,CAEA,CAHA;AAIA,SAJA,iBAIA,CAJA,EAIA;AACA,cAAA,GAAA,CAAA,MAAA,EAAA,CAAA;AACA,WAAA,KAAA,CAAA,IAAA,CAAA,EAAA,IAAA;AACA,WAAA,IAAA,GAAA,EAAA,IAAA,CAAA,SAAA;AACA,cAAA,GAAA,CAAA,OAAA,EAAA,KAAA,IAAA,EAJA,CAKA;AACA;;AACA,WAAA,KAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA,KAAA,EAAA;AACA,aAAA,GAAA,GAAA,QAAA,CAAA;AACA,aAAA,IAAA,GAAA,CAAA;AACA,OAHA;AAIA,UAAA,KAAA,KAAA,KAAA,CAAA,KAAA,SAAA,CAAA,EAAA,IAAA,EAAA,OAAA,CAAA,YAAA,EAAA,MAAA,CAAA,CAAA,CAXA,CAYA;AACA;AACA;AACA,KAnBA;AAoBA;AACA,gBArBA,wBAqBA,IArBA,EAqBA;AACA,WAAA,KAAA,CAAA,MAAA,CAAA,MAAA;AACA,KAvBA;AAwBA,gBAxBA,wBAwBA,IAxBA,EAwBA,QAxBA,EAwBA;AACA,cAAA,GAAA,CAAA,SAAA,EAAA,IAAA,EAAA,SAAA,EAAA,QAAA,EAAA,CAAA,EADA,CAEA;;AACA,WAAA,IAAA,CAAA,IAAA,IAAA,EAAA;AACA,aAAA,IAAA,CAAA,IAAA,KAAA,KAAA,EAAA;AACA,cAAA,KAAA,CAAA,EAAA,IAAA,IAAA,KAAA,KAAA,CAAA,CAAA,EAAA,SAAA,EAAA;AACA,iBAAA,KAAA,CAAA,MAAA,CAAA,CAAA,EAAA,CAAA;AACA;AACA;AACA;AACA,KAlCA;AAmCA,iBAnCA,yBAmCA,IAnCA,EAmCA;AACA,cAAA,GAAA,CAAA,IAAA,EADA,CAEA;;AACA,UAAA,KAAA,QAAA,EAAA;AACA,eAAA,IAAA,CAAA,KAAA,QAAA,CAAA,IAAA,CAAA,SAAA;AACA,OAFA,MAEA;AACA,eAAA,IAAA,CAAA,KAAA,IAAA,GAAA,KAAA,GAAA;AACA,OAPA,CAQA;;AACA,KA5CA;AA6CA;AACA,OA9CA,eA8CA,IA9CA,EA8CA;AACA,cAAA,GAAA,CAAA,QAAA,KAAA,QAAA,CAAA,KAAA;AACA,cAAA,GAAA,CAAA,OAAA,KAAA,IAAA,CAAA,KAAA;AACA,cAAA,GAAA,CAAA,QAAA,KAAA,IAAA,CAAA,KAAA;AACA,WAAA,QAAA,GAAA,KAAA,QAAA,CAAA,KAAA;AACA,WAAA,IAAA,GAAA,KAAA,IAAA,CAAA,KAAA;AACA,WAAA,IAAA,GAAA,KAAA,IAAA,CAAA,KAAA;AACA,KArDA;AAsDA;AACA,UAvDA,oBAuDA;AAAA;;AACA;AACA,UAAA,QAAA,OAAA,YAAA,CAAA,OAAA,CAAA,OAAA,CAAA;AACA,UAAA,OAAA,IAAA;AACA,cAAA,GAAA,CAAA,MAAA,EAAA,KAAA,QAAA;AACA,UAAA,UAAA,KAAA,OAAA;AACA,UAAA,OAAA,KAAA,IAAA;AACA,UAAA,IAAA;;AACA,UAAA,KAAA,IAAA,IAAA,MAAA,EAAA;AACA,eAAA,CAAA;AACA,OAFA,MAEA;AACA,eAAA,CAAA;AACA;;AACA,UAAA,KAAA;;AACA,UAAA,KAAA,EAAA,IAAA,MAAA,EAAA;AACA,gBAAA,CAAA;AACA,OAFA,MAEA;AACA,gBAAA,CAAA;AACA;;AACA,UAAA,SAAA;AACA,oBADA;AAEA,uBAAA,IAFA;AAGA,cAAA,KAAA,QAHA;AAIA,gBAAA,KAAA,MAJA;AAKA,wBAAA,KAAA,GALA;AAMA,gBAAA,KAAA,SANA;AAOA,kBAAA,KAAA,QAPA;AAQA,wBAAA,KAAA,IARA;AASA,kBAAA,KAAA,QATA;AAUA,iBAAA,KAAA,QAAA,GAAA,KAAA,IAAA,GAAA,KAAA,IAAA,GAAA,KAAA,OAVA;AAWA;AACA;AACA,iBAAA,CAbA;AAcA,mBAAA,KAdA;AAeA,iBAAA,KAAA;AAfA,OAAA;AAiBA,WAAA,KAAA,CAAA,IAAA,CAAA,mBAAA,EAAA,MAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,gBAAA,GAAA,CAAA,UAAA,EAAA,GAAA;;AACA,YAAA,IAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EAAA;AACA,gBAAA,KAAA,CAAA,IAAA,CAAA,iBAAA,EAAA;AAAA,qBAAA,OAAA;AAAA,kBAAA,CAAA;AAAA,kBAAA,MAAA;AAAA,WAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,oBAAA,GAAA,CAAA,UAAA,EAAA,GAAA;;AACA,gBAAA,IAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EAAA;AACA,yBAAA,YAAA;AACA,qBAAA,OAAA,CAAA,IAAA,CAAA,YAAA;AACA,eAFA,EAEA,IAFA;AAGA,aAJA,MAIA;AACA,oBAAA,IAAA,IAAA,CAAA,GAAA;AACA;AACA,WATA,EASA,KATA,CASA,UAAA,GAAA,EAAA;AACA,oBAAA,GAAA,CAAA,MAAA,EAAA,GAAA;AACA,WAXA;AAYA,SAbA,MAaA;AACA,gBAAA,IAAA,IAAA,CAAA,GAAA;AACA;AACA,OAlBA,EAkBA,KAlBA,CAkBA,UAAA,GAAA,EAAA;AACA,gBAAA,GAAA,CAAA,MAAA,EAAA,GAAA;AACA,OApBA;AAqBA;AAhHA,GAxDA;AA2KA;AACA,SA5KA,qBA4KA;AAAA;;AACA,eAAA,YAAA;AACA,UAAA,QAAA,OAAA,YAAA,CAAA,OAAA,CAAA,OAAA,CAAA;AACA,UAAA,OAAA,MAAA;AACA,UAAA,SAAA;AACA,oBADA;AAEA,iBAAA,OAAA;AAFA,OAAA;;AAIA,aAAA,KAAA,CAAA,IAAA,CAAA,mBAAA,EAAA,MAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,gBAAA,GAAA,CAAA,UAAA,EAAA,GAAA;;AACA,YAAA,IAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EAAA;AACA,cAAA,MAAA,IAAA,IAAA,CAAA,IAAA,CAAA,IAAA;AACA,cAAA,OAAA,OAAA,IAAA;;AACA,cAAA,IAAA,aAAA,IAAA,CAAA,EAAA;AACA,gBAAA,KAAA,MAAA;AACA,WAFA,MAEA;AACA,gBAAA,KAAA,MAAA;AACA;;AACA,eAAA,IAAA,GAAA,EAAA;AACA,eAAA,QAAA,GAAA,IAAA,IAAA;AACA,iBAAA,QAAA,GAAA,IAAA,IAAA;;AACA,cAAA,IAAA,SAAA,IAAA,CAAA,EAAA;AACA,gBAAA,KAAA,MAAA;AACA,WAFA,MAEA;AACA,gBAAA,KAAA,MAAA;AACA;;AACA,eAAA,KAAA,GAAA,EAAA;AACA,eAAA,SAAA,GAAA,IAAA,MAAA;AACA,eAAA,GAAA,GAAA,IAAA,cAAA;AACA,eAAA,MAAA,GAAA,IAAA,MAAA;AACA,eAAA,IAAA,GAAA,IAAA,cAAA;AACA,eAAA,QAAA,GAAA,IAAA,QAAA;AACA,eAAA,QAAA,GAAA,IAAA,QAAA;AACA;;;;AAGA,eAAA,OAAA,GAAA,IAAA,OAAA;AACA,SA3BA,MA2BA;AACA,gBAAA,IAAA,IAAA,CAAA,GAAA;AACA;AACA,OAhCA,EAgCA,KAhCA,CAgCA,UAAA,GAAA,EAAA;AACA,gBAAA,GAAA,CAAA,MAAA,EAAA,GAAA;AACA,OAlCA;AAmCA;;;;;AAGA,UAAA,QAAA,OAAA,YAAA,CAAA,OAAA,CAAA,OAAA,CAAA;AACA,UAAA,OAAA,MAAA;AACA,UAAA,SAAA;AACA,oBADA;AAEA,iBAAA,OAAA,OAFA;AAGA,cAAA;AAHA,OAAA;;AAKA,aAAA,KAAA,CAAA,IAAA,CAAA,gBAAA,EAAA,MAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,gBAAA,GAAA,CAAA,UAAA,EAAA,GAAA;;AACA,YAAA,IAAA,IAAA,CAAA,IAAA,IAAA,GAAA,EAAA;AACA,eAAA,IAAA,CAAA,IAAA,IAAA,IAAA,CAAA,IAAA,EAAA;AACA,gBAAA,KAAA,KAAA,KAAA,CAAA,KAAA,SAAA,CAAA,IAAA,IAAA,CAAA,IAAA,EAAA,OAAA,CAAA,YAAA,EAAA,MAAA,CAAA,CAAA;AACA,oBAAA,GAAA,CAAA,EAAA;AACA;;AACA,iBAAA,QAAA,GAAA,EAAA;AACA,iBAAA,KAAA,GAAA,IAAA,IAAA,CAAA,IAAA;AACA,SAPA,MAOA;AACA,gBAAA,IAAA,IAAA,CAAA,GAAA;AACA;AACA,OAZA,EAYA,KAZA,CAYA,UAAA,GAAA,EAAA;AACA,gBAAA,GAAA,CAAA,MAAA,EAAA,GAAA;AACA,OAdA;AAgBA,KApEA,EAoEA,IApEA;AAqEA,GAlPA;AAmPA;AACA,SApPA,qBAoPA,CAEA,CAtPA;AAuPA,cAvPA,0BAuPA;AACA,SAAA,OAAA,GAAA,KAAA,MAAA,CAAA,KAAA,CAAA,EAAA;AACA,YAAA,GAAA,CAAA,KAAA,OAAA;AACA,GA1PA;AA0PA;AACA,aA3PA,yBA2PA,CAEA,CA7PA;AA6PA;AACA,cA9PA,0BA8PA,CAAA,CA9PA;AA8PA;AACA,SA/PA,qBA+PA,CAAA,CA/PA;AA+PA;AACA,eAhQA,2BAgQA,CAAA,CAhQA;AAgQA;AACA,WAjQA,uBAiQA,CAAA,CAjQA;AAiQA;AACA,WAlQA,uBAkQA,CAAA;AAlQA,CAAA","sourcesContent":["<!-- 添加新客户 -->\r\n<template>\r\n<div class='add'>\r\n   <!-- 顶部导航条 -->\r\n  <div class=\"adduser d-flex\">\r\n    <div class=\"img\"><img class=\"icon\" src=\"../../../assets/waimao/icon/usernum.png\" alt=\"\"></div>\r\n    <div class=\"title\">用户名</div>\r\n    <div class=\"title\" style=\"color:#0666A4\">{{userName}}</div>\r\n  </div>\r\n  <!-- 填写客户信息 -->\r\n  <div class=\"fill\">\r\n    <div class=\"fillTitle\">填写客户基本信息</div>\r\n    <!-- 表单填写 -->\r\n    <div class=\"fillForm\">\r\n    <el-form ref=\"form\" :model=\"form\" label-position=\"left\" label-width=\"80px\">\r\n  <!-- 第一行 -->\r\n    <div class=\"d-flex\">\r\n    <!-- 客户类型 -->\r\n      <el-form-item label=\"客户类型\">\r\n        <el-select v-model=\"form.type\"  placeholder=\"请选择客户类型\">\r\n          <el-option label=\"中方客户\" value=\"中方客户\"></el-option>\r\n          <el-option label=\"外方客户\" value=\"外方客户\"></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n    <!-- 联系人 -->\r\n      <el-form-item style=\"margin-left:101px;\" label=\"联系人\">\r\n        <el-input placeholder=\"请填写联系人姓名\" v-model=\"form.username\"></el-input>\r\n      </el-form-item>\r\n      <!-- 微信 -->\r\n      <el-form-item style=\"margin-left:101px;\" label=\"微信\">\r\n        <el-input type=\"text\" placeholder=\"请填写客户微信\" v-model=\"form.userwx\"></el-input>\r\n      </el-form-item>\r\n    </div>\r\n\r\n    <!-- 第二行 -->\r\n    <div class=\"d-flex\">\r\n       <!-- 单位名称 -->\r\n      <el-form-item label=\"单位名称\">\r\n        <el-input type=\"text\" placeholder=\"请提供完整正确的单位名称\" v-model=\"form.com\"></el-input>\r\n      </el-form-item>\r\n    <!-- 联系电话 -->\r\n      <el-form-item style=\"margin-left:101px;\" label=\"联系电话\">\r\n        <el-input type=\"number\" placeholder=\"请填写联系人电话\" v-model=\"form.userphone\"></el-input>\r\n      </el-form-item>\r\n      <!-- whatAPP -->\r\n      <el-form-item style=\"margin-left:101px;\" label=\"whatAPP\">\r\n        <el-input type=\"text\" placeholder=\"请填写客户whatApp\" v-model=\"form.userwhat\"></el-input>\r\n      </el-form-item>\r\n    </div>\r\n    <!-- 第三行 -->\r\n    <div class=\"d-flex\">\r\n     <!-- 单位代码 -->\r\n      <el-form-item label=\"单位代码\">\r\n        <el-input type=\"text\" placeholder=\"请提供完整正确的单位代码\" v-model=\"form.code\"></el-input>\r\n      </el-form-item>\r\n      <!-- 邮箱 -->\r\n      <!-- <el-form-item style=\"margin-left:101px;;\" label=\"邮箱\">\r\n        <el-input type=\"email\" placeholder=\"请填写联系人邮箱\" v-model=\"form.email\"></el-input>\r\n      </el-form-item> -->\r\n    <!-- Facebook -->\r\n      <el-form-item style=\"margin-left:101px;\" label=\"Facebook\">\r\n        <el-input type=\"text\" placeholder=\"请填写客户Facebook\" v-model=\"form.userface\"></el-input>\r\n      </el-form-item>\r\n    </div>\r\n    <!-- 第四行 -->\r\n    <div class=\"d-flex\">\r\n      <!-- 地址 -->\r\n      <!-- <el-form-item label=\"地址\"> -->\r\n        <!-- <el-input type=\"text\" placeholder=\"请提供完整正确的单位代码\" v-model=\"form.code\"></el-input> -->\r\n        <!-- <v-distpicker :province=\"select.province\" :city=\"select.city\" @selected=\"sub\" :area=\"select.area\"></v-distpicker> -->\r\n      <!-- </el-form-item> -->\r\n      <el-form-item label=\"地址\">\r\n       <el-input type=\"text\" placeholder=\"请填写详细地址\" v-model=\"form.address\"></el-input>\r\n      </el-form-item> \r\n    </div>  \r\n    <!-- 选择客户业务类型 -->\r\n    <div class=\"chooseTitle\">选择客户业务类型</div>\r\n    <div style=\"margin-top:26px;\">\r\n     <el-form-item label=\"业务类型\">\r\n        <el-select v-model=\"form.type2\" placeholder=\"请选择客户业务类型\">\r\n          <el-option label=\"一般业务\" value=\"一般业务\"></el-option>\r\n          <el-option label=\"融资业务\" value=\"融资业务\"></el-option>\r\n        </el-select>\r\n     </el-form-item>\r\n    </div>\r\n    </el-form>\r\n  </div>\r\n  <div style=\"margin-left:57px;\" class=\"chooseTitle\">合作资料</div>\r\n  <div class=\"coop\">\r\n    <div class=\"coopTitle\">您需要提交的申请包括</div>\r\n    <div class=\"d-flex\" style=\"margin-left:-25px;\">\r\n      <ol type=\"1\">\r\n        <li>营业执照<span>*</span></li>\r\n        <li>法定代表人与实际控制人身份证<span>*</span></li>\r\n        <li>银行账户信息<span>*</span></li>\r\n        <li :style=\"form.type2=='一般业务客户'||form.type2==''?'display:none':''\">征信报告（公司、法人及实际控制人）<span>*</span></li>\r\n        <li :style=\"form.type2=='一般业务客户'||form.type2==''?'display:none':''\">最近一次验资报告</li>\r\n        <div style=\"color:#FF0000;font-size:14px;font-weight:400;margin-left:-16px;margin-top:9px;\">注：以上资料均为复印件（加盖企业公章）</div>\r\n      </ol>\r\n      <ol style=\"margin-left:200px;\" :style=\"form.type2=='一般业务客户'||form.type2==''?'display:none':''\" start=\"6\">\r\n        <li>公司章程</li>\r\n        <li>企业简介</li>\r\n        <li>主营相关资格证书</li>\r\n        <li>最近一年财务报表明细或最新的审计报告</li>\r\n        <li>资产证明文件（公司、法人及实际监控人名下，如房屋产权证、车辆产权证等）</li>\r\n      </ol>\r\n    </div>\r\n  </div>\r\n  <div style=\"margin-left:57px;\">\r\n    <el-upload\r\n  class=\"upload-demo\" ref=\"upload\" :on-change=\"getFileName\" action=\"http://192.168.0.140:8002/main/tools/upFile\" :on-preview=\"handlePreview\" :on-success=\"upsuc\" :on-remove=\"handleRemove\" :file-list=\"fileList\" :auto-upload=\"true\">\r\n    <el-button size=\"small\" type=\"primary\"  @click=\"submitUpload\">上传资料</el-button>\r\n    </el-upload>\r\n  </div>\r\n  <!--  -->\r\n  <div style=\"display: flex;justify-content: center;\">\r\n    <button class=\"mybtn btn\" @click=\"submit\">确认修改</button>\r\n  </div>\r\n  </div>\r\n  <!-- 填写客户基本信息 -->\r\n</div>\r\n</template>\r\n\r\n<script>\r\n//这里可以导入其他文件（比如：组件，工具js，第三方插件js，json文件，图片文件等等）\r\n//例如：import 《组件名称》 from '《组件路径》';\r\nimport VDistpicker from 'v-distpicker'\r\nexport default {\r\n  //import引入的组件需要注入到对象中才能使用\r\ncomponents: {},\r\ndata() {\r\n  //这里存放数据\r\nreturn {\r\n  //\r\n  files:[],\r\n  // 用户名\r\n  userName:\"\",\r\n  // 上传文件地址\r\n   fileList: [],\r\n  // 省份\r\n  province:\"\",\r\n  // 城市\r\n  city:\"\",\r\n  // 地区\r\n  area:\"\",\r\n  formInline: {\r\n          user: '',\r\n          region: ''\r\n        },\r\n        // 地址选择器\r\n  select: { province: '', city: '', area: '' },\r\n  // \r\n  form:{\r\n    // 客户类型\r\n    type:\"\",\r\n    // 联系人\r\n    username:\"\",\r\n    // 业务类型\r\n    type2:\"\",\r\n    // 联系电话\r\n    userphone:\"\",\r\n    // 单位名称\r\n    com:\"\",\r\n    // 微信\r\n    userwx:\"\",\r\n    // 单位代码\r\n    code:\"\",\r\n    // whatAPP\r\n    userwhat:\"\",\r\n    // Facebook\r\n    userface:\"\",\r\n    // 详细地址\r\n    address:\"\",\r\n    // 邮箱\r\n    email:\"\",\r\n  }\r\n};\r\n},\r\n//监听属性 类似于data概念\r\ncomputed: {},\r\n//监控data中的数据变化\r\nwatch: {},\r\n//方法集合\r\nmethods: {\r\n  getFileName(){\r\n  \r\n},\r\nupsuc(e){\r\n  console.log('上传成功',e)\r\n    this.files.push(e.data)\r\n  this.look=e.data.full_path\r\n  console.log('查看的地址',this.look)\r\n  // this.sp.push(e.data.path('_'))\r\n    // 为原数组添加新的下标\r\n  this.files.forEach((item,index)=> {\r\n    item.num = index+1;\r\n    item.type=5\r\n  })\r\n  var r2= JSON.parse(JSON.stringify(e.data).replace(/file_name/g, 'name'))\r\n    // 为原数组添加新的下标\r\n  // this.fileList.push(e.data)\r\n  // conso\r\n},\r\n  // 上传文件\r\n  submitUpload(file) {\r\n        this.$refs.upload.submit();\r\n  },\r\n  handleRemove(file, fileList) {\r\n  console.log('删除的文件地址',file,'删除的文件路径', fileList,e);\r\n  // this.files\r\n  for(var i in file){\r\n    for(var m in this.files){\r\n      if(file[i].name==this.files[m].file_name){\r\n        this.files.splice(m,1)\r\n      }\r\n    }\r\n  }\r\n  },\r\n  handlePreview(file) {\r\n    console.log(file)\r\n    // console.log(file.path+file.url);\r\n    if(file.response){\r\n      window.open(file.response.data.full_path)\r\n    }else{\r\n      window.open(file.path+file.url)\r\n    }\r\n    // return this\r\n  },\r\n  // 提交地区信息\r\n  sub(data){\r\n  console.log(\"省份：\"+data.province.value)\r\n\tconsole.log(\"市：\"+data.city.value)\r\n  console.log(\"地区：\"+data.area.value)\r\n  this.province=data.province.value\r\n  this.city=data.city.value\r\n  this.area=data.area.value\r\n  },\r\n// 提交所有信息\r\nsubmit(){\r\n  // var r3= JSON.parse(JSON.stringify(this.fileList).replace(/name/g, 'file_name'))\r\n  var\tToken=window.localStorage.getItem('token')\r\n  var\tthat=this\r\n  console.log('上传文件',this.fileList)\r\n  var user_id=that.user_id\r\n  var form=that.form\r\n  var type\r\n    if(form.type=='中方客户'){\r\n      type=1\r\n    }else{\r\n      type=2\r\n    }\r\n    var type2\r\n    if(form.t2=='一般业务'){\r\n      type2=1\r\n    }else{\r\n      type2=2\r\n    }\r\n  var\tparams={\r\n  Token,\r\n  customer_type:type,\r\n  name:form.username,\r\n  wechat:form.userwx,\r\n  corporate_name:form.com,\r\n  mobile:form.userphone,\r\n  what_app:form.userwhat,\r\n  corporate_code:form.code,\r\n  facebook:form.userface,\r\n  address:this.province+this.city+this.area+form.address,\r\n  // email:form.email,\r\n  // passwd:form.pwd,\r\n  role_id:1,\r\n  user_type:type2,\r\n  user_id:that.user_id\r\n  }\r\n  this.$ajax.post('/auth/setUserInfo',params).then((res)=>{\r\n      console.log('请求修改用户结果',res)\r\n    if(res.data.code==200){\r\n            this.$ajax.post('/tools/saveFile',({user_id:user_id,type:5,data:this.files})).then((res)=>{\r\n          console.log('上传修改文件结果',res)\r\n        if(res.data.code==200){\r\n          setTimeout(() => {\r\n            that.$router.push('/chinaUser')\r\n          }, 1500);\r\n        }else{\r\n        alert(res.data.msg)\r\n      }\r\n        }).catch((err)=>{\r\n          console.log('请求失败',err)\r\n        })\r\n    }else{\r\n    alert(res.data.msg)\r\n  }\r\n    }).catch((err)=>{\r\n      console.log('请求失败',err)\r\n    })\r\n},\r\n\r\n},\r\n//生命周期 - 创建完成（可以访问当前this实例）\r\ncreated() {\r\n  setTimeout(()=>{\r\n    var\tToken=window.localStorage.getItem('token')\r\n    var\tthat=this\r\n    var\tparams={\r\n    Token,\r\n    user_id:this.user_id\r\n    }\r\n    this.$ajax.post('/auth/getUserInfo',params).then((res)=>{\r\n        console.log('请求结果客户详情',res)\r\n      if(res.data.code==200){\r\n        var res=res.data.data.user\r\n        var form=this.form\r\n        if(res.customer_type==1){     \r\n          var t1='中方客户'\r\n        }else{\r\n          var t1='外方客户'\r\n        }\r\n        form.type=t1\r\n        form.username=res.name\r\n        this.userName=res.name\r\n        if(res.user_type==1){\r\n          var t2='一般业务'\r\n        }else{\r\n          var t2='融资业务'\r\n        }\r\n        form.type2=t2\r\n        form.userphone=res.mobile\r\n        form.com=res.corporate_name\r\n        form.userwx=res.wechat\r\n        form.code=res.corporate_code\r\n        form.userwhat=res.what_app\r\n        form.userface=res.facebook\r\n        /**\r\n         * 分割地址\r\n         */\r\n        form.address=res.address\r\n      }else{\r\n      alert(res.data.msg)\r\n    }\r\n      }).catch((err)=>{\r\n        console.log('请求失败',err)\r\n      })\r\n      /**\r\n       * 获取上传文件列表\r\n       */\r\n      var\tToken=window.localStorage.getItem('token')\r\n      var\tthat=this\r\n      var\tparams={\r\n      Token,\r\n      user_id:this.user_id,\r\n      type:5\r\n      }\r\n      this.$ajax.post('/tools/getFile',params).then((res)=>{\r\n          console.log('请求文件列表结果',res)\r\n        if(res.data.code==200){\r\n          for(var i in res.data.data){\r\n           var r2= JSON.parse(JSON.stringify(res.data.data).replace(/file_name/g, 'name'))\r\n            console.log(r2)\r\n          }\r\n          this.fileList=r2\r\n          this.files=res.data.data\r\n        }else{\r\n        alert(res.data.msg)\r\n      }\r\n        }).catch((err)=>{\r\n          console.log('请求失败',err)\r\n        })\r\n\r\n  },1000)\r\n},\r\n//生命周期 - 挂载完成（可以访问DOM元素）\r\nmounted() {\r\n\r\n},\r\nbeforeCreate() {\r\n    this.user_id=this.$route.query.id\r\n  console.log(this.user_id)\r\n}, //生命周期 - 创建之前\r\nbeforeMount() {\r\n\r\n}, //生命周期 - 挂载之前\r\nbeforeUpdate() {}, //生命周期 - 更新之前\r\nupdated() {}, //生命周期 - 更新之后\r\nbeforeDestroy() {}, //生命周期 - 销毁之前\r\ndestroyed() {}, //生命周期 - 销毁完成\r\nactivated() {}, //如果页面有keep-alive缓存功能，这个函数会触发\r\n}\r\n</script>\r\n<style scoped>\r\n/* @import url(); 引入公共css类 */\r\n/* 顶部指示器 */\r\n.leftnav[data-v-777f4df8]{\r\n  height:1181px!important;\r\n}\r\n.top{\r\n  width:1689px;height:50px;background:rgba(255,255,255,1);\r\n  margin-top:1px;\r\n  margin-left:-30px;\r\n}\r\n/* 添加新用户 */\r\n.adduser{\r\n  background:#fff;\r\n  width:1644px;height:70px;\r\n  margin-top:21px;\r\n  border-left:6px solid rgba(6,102,164,1);\r\n}\r\n.img{\r\n  width:31px;height: 31px;margin:auto 0;\r\n  margin-left:16px;\r\n}\r\n.title{\r\n  font-size:24px;\r\n  font-family:Microsoft YaHei;\r\n  font-weight:bold;\r\n  color:rgba(51,51,51,1);\r\n  line-height:70px;\r\n  margin-left:10px;\r\n}\r\n/* 填写信息外部大框 */\r\n.fill{\r\n  width:1649px;\r\nheight:1010px;\r\nbackground:rgba(255,255,255,1);\r\nmargin-top:10px;\r\npadding-top:40px;\r\n}\r\n.fillTitle{\r\n  width:200px;\r\nheight:46px;\r\nbackground:rgba(154,195,220,1);\r\nborder-radius:10px;\r\ntext-align: center;\r\nline-height: 46px;\r\nfont-size:20px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:bold;\r\ncolor:rgba(255,255,255,1);\r\nmargin-left:57px;\r\n}\r\n/* 选择客户业务类型 */\r\n.chooseTitle{\r\nwidth:200px;\r\nheight:46px;\r\nbackground:rgba(154,195,220,1);\r\nborder-radius:10px;\r\ntext-align: center;\r\nline-height: 46px;\r\nfont-size:20px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:bold;\r\ncolor:rgba(255,255,255,1);\r\nmargin-top:31px;\r\n}\r\n/* 填写表单 */\r\n.fillForm{\r\n  margin-top:21px;\r\n  margin-left:57px;\r\n}\r\n/deep/ .distpicker-address-wrapper select{\r\n\tfont-size:14px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:400;\r\ncolor:rgba(153,153,153,1)!important;\r\nwidth:120px!important;\r\nheight:30px!important;\r\nbackground:rgba(237,237,237,1)!important;\r\nborder-radius:10px!important;\r\npadding:0;\r\npadding-left:1.5rem;\r\nmargin-right:9px;\r\nborder:0;\r\n}\r\n.distpicker-address-wrapper :last-child{\r\n  margin-right:0px;\r\n}\r\n\r\n.title{\r\n  font-size:24px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:bold;\r\ncolor:rgba(51,51,51,1);\r\ntext-align: center;\r\nmargin-bottom:57px;\r\n}\r\n/* 输入框样式 */\r\n /deep/ .el-input--suffix .el-input__inner{\r\n  width:320px!important;\r\n/* height:30px!important; */\r\nbackground:rgba(237,237,237,1);\r\nborder-radius:10px!important;\r\n}\r\n/* 联系人输入框 */\r\n.el-input{\r\n   width:320px!important;\r\nheight:30px!important;\r\nbackground:rgba(237,237,237,1);\r\nborder-radius:10px!important;\r\n}\r\n /deep/ input{\r\n  background:rgba(237,237,237,1)!important;\r\n  width:320px!important;\r\n/* height:30px!important; */\r\nborder-radius:10px!important;\r\nmargin-top:-10px!important;\r\n}\r\n/deep/ .distpicker-address-wrapper select {\r\n  padding-left:10px;\r\n}\r\n/* 合作资料 */\r\n.coop{\r\n  margin-left:57px;\r\n}\r\n.coopTitle{\r\n  font-size:16px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:bold;\r\ncolor:rgba(6,102,164,1);\r\nmargin-top:19px;\r\n}\r\n/* * */\r\nol li span{\r\nfont-size:14px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:400;\r\ncolor:#FF0000;\r\n}\r\nol li{\r\n  font-size:14px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:400;\r\ncolor:rgba(0,0,0,1);\r\nline-height:27px;\r\n} \r\n/* 上传资料 */\r\n.upload{\r\n  width:100px;\r\n  height:30px;\r\n  background:rgba(154,195,220,1);\r\n  border-radius:10px;\r\n  font-size:14px;\r\n  font-family:Microsoft YaHei;\r\n  font-weight:400;\r\n  color:rgba(255,255,255,1);\r\n  border:0;\r\n  }\r\n/* 提交按钮 */\r\n.mybtn{\r\n  width:170px;\r\nheight:46px;\r\nbackground:rgba(6,102,164,1);\r\nborder-radius:10px;\r\ncolor:#fff;\r\nfont-size:20px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:400;\r\n}\r\n/deep/ .el-upload-list__item{\r\n  width:300px;\r\n}\r\n.el-upload-list{\r\n  margin-left:57px!important;margin-bottom:23px;\r\n}\r\n</style>"],"sourceRoot":"src\\components\\waimao\\home"}]}