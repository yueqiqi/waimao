{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\waimao\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\waimao\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\waimao\\vue_app_00\\src\\components\\waimao\\orderlist\\closing.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\waimao\\vue_app_00\\src\\components\\waimao\\orderlist\\closing.vue","mtime":1574846140835},{"path":"C:\\Users\\Administrator\\Desktop\\waimao\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\Administrator\\Desktop\\waimao\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"C:\\Users\\Administrator\\Desktop\\waimao\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.regexp.to-string\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//这里可以导入其他文件（比如：组件，工具js，第三方插件js，json文件，图片文件等等）\n//例如：import 《组件名称》 from '《组件路径》';\nexport default {\n  //import引入的组件需要注入到对象中才能使用\n  components: {},\n  data: function data() {\n    //这里存放数据\n    return {\n      // 净利润\n      net: \"\",\n      // 其他费用\n      all: \"0\",\n      dis2: true,\n      // 退税手续费\n      // 备注\n      backinput: \"\",\n      back: \"\",\n      // 中信保保费\n      // 备注\n      zxbinput: \"\",\n      zxb: \"\",\n      remark3: \"\",\n      //其他费用 \n      consts3: \"0\",\n      // 备注\n      remark2: \"\",\n      // 资金成本\n      consts2: \"0\",\n      // 备注\n      remark: \"\",\n      // 代理费用\n      consts: \"0\",\n      // /////////////////////////////////////////\n      // 簽訂時間\n      time: \"2019-07-30\",\n      seconed: \"10:00\",\n      // 是否禁用\n      dis: true,\n      // table数据\n      details: []\n    };\n  },\n  //监听属性 类似于data概念\n  computed: {},\n  //监控data中的数据变化\n  watch: {},\n  //方法集合\n  methods: {\n    toThousands: function toThousands(num) {\n      var num = (num || 0).toString(),\n          result = '';\n\n      while (num.length > 3) {\n        result = ',' + num.slice(-3) + result;\n        num = num.slice(0, num.length - 3);\n      }\n\n      if (num) {\n        result = num + result;\n      }\n\n      return result;\n    },\n    // 其他费用\n    // 其他费用\n    sub4: function sub4() {\n      this.dis2 = false;\n      console.log(this.remark3);\n      console.log(this.consts3);\n    },\n    set4: function set4() {\n      this.dis2 = false;\n    },\n    //  资金成本\n    sub3: function sub3() {\n      this.dis2 = false;\n      console.log(this.remark2);\n      console.log(this.consts2);\n    },\n    set3: function set3() {\n      this.dis2 = false;\n    },\n    // 代理费\n    sub2: function sub2() {\n      this.dis2 = false;\n      console.log(this.remark);\n      console.log(this.consts);\n    },\n    set2: function set2() {\n      this.dis2 = false;\n    },\n    // 、、、、、、、、、、、、、、、、、、、、、、、、、、、、、、、、、\n    // 导入按钮\n    load2: function load2() {\n      console.log(\"导入按钮\");\n    },\n    // 导出按钮\n    unload2: function unload2() {\n      console.log(\"导出按钮\");\n    },\n    // 发票\n    invoice: function invoice(event) {\n      // console.log(\"值\"+event)\n      console.log(\"mm\" + event); // console.log(i)\n      // e=this.details[i].has\n    },\n    // 退税\n    tax: function tax(e) {\n      console.log(e); // console.log(i)\n    },\n    // 备注\n    other: function other(e) {\n      console.log(e);\n    },\n    // 编辑\n    set: function set(i) {\n      console.log(\"编辑\");\n      console.log(i);\n      this.dis = false;\n    },\n    // 提交\n    sub: function sub(i) {\n      console.log(\"编辑\");\n      console.log(\"第\" + i + \"个\" + this.details[i].rate); // this.details[i].has=this.details[i].has\n    }\n  },\n  //生命周期 - 创建完成（可以访问当前this实例）\n  created: function created() {\n    var _this = this;\n\n    /**\r\n     * 获取商品列表\r\n     */\n    var Token = window.localStorage.getItem('token');\n    var that = this;\n    var params = {\n      Token: Token,\n      order_id: this.order_id\n    };\n    this.$ajax.post('/order/getGoodsList', params).then(function (res) {\n      console.log('请求结算汇总结果', res);\n\n      if (res.data.code == 200) {\n        _this.details = _this.data.data;\n      } else {\n        alert(res.data.msg);\n      }\n    }).catch(function (err) {\n      console.log('请求失败', err);\n    });\n\n    for (var i in this.details) {\n      if (this.details[i].other == \"\") {\n        this.details[i].other = \"-\";\n        continue;\n      }\n    }\n\n    for (var i in this.details) {\n      this.details[i].gross = parseInt(this.details[i].sell) + parseInt(this.details[i].tax) - parseInt(this.details[i].purchase) - parseInt(this.details[i].expense) - parseInt(this.details[i].othermoney);\n    } // 中间逗号隔开\n    // var num = (this.details[0].purchase|| 0).toString(), result = '';\n    //     while (num.length > 3) {\n    //         result = ',' + num.slice(-3) + result;\n    //         num = num.slice(0, num.length - 3);\n    //     }\n    //     if (num) { result = num + result; }\n    //    console.log(result)\n    //    console.log(\"============================\")\n\n\n    for (var m in this.details) {\n      var purchase = parseInt(this.details[m].purchase);\n      var sell = parseInt(this.details[m].sell);\n      var tax = parseInt(this.details[m].tax);\n      var expense = parseInt(this.details[m].expense);\n      var othermoney = parseInt(this.details[m].othermoney);\n      var gross = parseInt(this.details[m].gross);\n      var data1 = purchase.toFixed(2).replace(/\\d{1,3}(?=(\\d{3})+(\\.\\d*)?$)/g, '$&,');\n      var data2 = sell.toFixed(2).replace(/\\d{1,3}(?=(\\d{3})+(\\.\\d*)?$)/g, '$&,');\n      var data3 = tax.toFixed(2).replace(/\\d{1,3}(?=(\\d{3})+(\\.\\d*)?$)/g, '$&,');\n      var data4 = expense.toFixed(2).replace(/\\d{1,3}(?=(\\d{3})+(\\.\\d*)?$)/g, '$&,');\n      var data5 = othermoney.toFixed(2).replace(/\\d{1,3}(?=(\\d{3})+(\\.\\d*)?$)/g, '$&,');\n      var data6 = gross.toFixed(2).replace(/\\d{1,3}(?=(\\d{3})+(\\.\\d*)?$)/g, '$&,'); // return  $(\"#demo3\").text(data2);\n\n      this.details[m].purchase = data1;\n      this.details[m].sell = data2;\n      this.details[m].tax = data3;\n      this.details[m].expense = data4;\n      this.details[m].othermoney = data5;\n      this.details[m].gross = data6;\n      console.log(\"保留两位小数且有逗号\" + data1, data2, data3, data4, data5, data6); // 小数转为百分数\n\n      var str = Number(this.details[m].rate * 100).toFixed();\n      str += \"%\";\n      console.log(\"百分数\" + str);\n      this.details[m].rate = str;\n    }\n  },\n  //生命周期 - 挂载完成（可以访问DOM元素）\n  mounted: function mounted() {},\n  beforeCreate: function beforeCreate() {\n    this.order_id = this.$route.query.order_id;\n  },\n  //生命周期 - 创建之前\n  beforeMount: function beforeMount() {},\n  //生命周期 - 挂载之前\n  beforeUpdate: function beforeUpdate() {},\n  //生命周期 - 更新之前\n  updated: function updated() {\n    this.all = parseInt(this.consts) + parseInt(this.consts2) + parseInt(this.consts3);\n  },\n  //生命周期 - 更新之后\n  beforeDestroy: function beforeDestroy() {},\n  //生命周期 - 销毁之前\n  destroyed: function destroyed() {},\n  //生命周期 - 销毁完成\n  activated: function activated() {}\n};",{"version":3,"sources":["closing.vue"],"names":[],"mappings":"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","sourcesContent":["<!-- 结算汇总 -->\r\n<template>\r\n<div class='receiving'>\r\n  <div class=\"receivingTitle\">结算汇总</div>\r\n  <div class=\"d-flex\" style=\"margin-top:30px;\">\r\n      <div class=\"time\">操作时间</div>\r\n      <div>{{time}}<span style=\"margin-left:10px;\">{{seconed}}</span></div>\r\n  </div>\r\n  <!-- 商品信息 -->\r\n  <div style=\"display:flex;justify-content:space-between;margin-right:113px;margin-top:30px;\">\r\n  <div class=\"rtitle\">出口业务结算汇总表</div>\r\n  <div class=\"d-flex\">\r\n  <button @click=\"load2\" style=\"border-top-right-radius:0;border-bottom-right-radius:0;\" class=\"load d-flex\"><div style=\"margin-left:7px;\">导入表格</div><div><img style=\"width:12px;height:13px;margin-top:9px;margin-left:4px;\" src=\"../../../assets/waimao/icon/load.png\" alt=\"\"></div></button>\r\n  <button @click=\"unload2\" style=\"margin-left:1px;border-bottom-left-radius:0;border-top-left-radius: 0;\" class=\"load d-flex\"><div style=\"margin-left:7px;\">导出表格</div><div><img style=\"width:12px;height:13px;margin-top:9px;margin-left:4px;\" src=\"../../../assets/waimao/icon/load.png\" alt=\"\"></div></button>\r\n  </div>\r\n  </div>\r\n  <div style=\"width:1522px;\">\r\n    <table>\r\n      <thead>\r\n        <td style=\"width:160px;\">采购成本</td>\r\n        <td style=\"width:160px;\">销售金额</td>\r\n        <td style=\"width:100px;\">汇率</td>\r\n        <td style=\"width:160px;\">退税金额</td>\r\n        <td style=\"width:100px;\">运费</td>\r\n        <td style=\"width:157px;\">其他费用<span style=\"font-size:\r\n12px;color:#999999\">(银行费用等)</span></td>\r\n        <td style=\"width:120px;\">毛利润</td>\r\n        <td style=\"width:357px;\">备注</td>\r\n        <td style=\"width:200px;border:0;\">操作</td>\r\n      </thead>\r\n      <tbody v-for=\"(item,i) in details\" :key=\"i\">\r\n        <td>{{item.purchase}}</td>\r\n        <td>{{item.sell}}</td>\r\n        <td style=\"color:#0666A4\">\r\n          <el-input :disabled=\"dis==true?true:false\" @change=\"invoice\" type=\"text\" v-model=\"item.rate\"></el-input>\r\n        </td>\r\n        <td style=\"color:#FF0000\">{{item.tax}}</td>\r\n        <td style=\"color:#0666A4\">\r\n          <el-input :disabled=\"dis==true?true:false\" @change=\"tax\" type=\"number\" v-model=\"item.expense\"></el-input>\r\n        </td>\r\n        <td style=\"color:#0666A4\">\r\n          <el-input  :disabled=\"dis==true?true:false\" @change=\"other\" type=\"text\" v-model=\"item.othermoney\"></el-input>\r\n        </td>\r\n        <td style=\"color:#FF0000\">{{item.gross}}</td>\r\n        <td style=\"color:#0666A4\">\r\n          <el-input  :disabled=\"dis==true?true:false\" @change=\"other\" type=\"text\" v-model=\"item.other\"></el-input>\r\n        </td>\r\n        <td style=\"border:0;\">\r\n          <button class=\"set\" @click=\"set(i)\">编辑</button>\r\n          <button class=\"sub\" @click=\"sub(i)\">提交</button>\r\n        </td>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n  <div class=\"times\"  style=\"margin-top:60px;margin-bottom:15px;\">费用明细<span style=\"font-size:14px;font-weight:400;margin-left:10px;;color:rgba(255,0,0,1);\">如果是代理业务，请补充费用明细</span></div>\r\n  <div style=\"width:1522px;\">\r\n    <table>\r\n      <thead> \r\n        <td style=\"width:240px;\">费用类型</td>\r\n        <td style=\"width:240px;\">费用金额</td>\r\n        <td style=\"width:839px;\">备注</td>\r\n        <td style=\"width:200px;border:0\">操作</td>\r\n      </thead>\r\n      <tbody class=\"other\">\r\n        <tr>\r\n          <td>代理费</td>\r\n          <td>\r\n            <el-input  :disabled=\"dis2==true?true:false\" @change=\"other\" type=\"number\" v-model=\"consts\"></el-input>\r\n          </td>\r\n          <td> \r\n            <el-input  :disabled=\"dis2==true?true:false\" @change=\"other\" type=\"text\" v-model=\"remark\"></el-input>\r\n          </td>\r\n          <td>\r\n            <button class=\"set\" @click=\"set2\">编辑</button>\r\n            <button class=\"sub\" @click=\"sub2\">提交</button>\r\n          </td>\r\n        </tr>\r\n         <tr>\r\n          <td>资金成本</td>\r\n          <td>\r\n             <el-input  :disabled=\"dis2==true?true:false\" @change=\"other\" type=\"number\" v-model=\"consts2\"></el-input>\r\n          </td>\r\n          <td>\r\n             <el-input  :disabled=\"dis2==true?true:false\" @change=\"other\" type=\"text\" v-model=\"remark2\"></el-input>\r\n          </td>\r\n          <td>\r\n            <button class=\"set\" @click=\"set3\">编辑</button>\r\n            <button class=\"sub\" @click=\"sub3\">提交</button>\r\n          </td>\r\n        </tr>\r\n         <tr>\r\n          <td>退税手续费</td>\r\n          <td>\r\n             <el-input  :disabled=\"dis2==true?true:false\" @change=\"other\" type=\"number\" v-model=\"back\"></el-input>\r\n          </td>\r\n          <td>\r\n             <el-input  :disabled=\"dis2==true?true:false\" @change=\"other\" type=\"text\" v-model=\"backinput\"></el-input>\r\n          </td>\r\n          <td>\r\n            <button class=\"set\" @click=\"set3\">编辑</button>\r\n            <button class=\"sub\" @click=\"sub3\">提交</button>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td>中信保保费</td>\r\n          <td>\r\n             <el-input  :disabled=\"dis2==true?true:false\" @change=\"other\" type=\"number\" v-model=\"zxb\"></el-input>\r\n          </td>\r\n          <td>\r\n             <el-input  :disabled=\"dis2==true?true:false\" @change=\"other\" type=\"text\" v-model=\"zxbinput\"></el-input>\r\n          </td>\r\n          <td>\r\n            <button class=\"set\" @click=\"set3\">编辑</button>\r\n            <button class=\"sub\" @click=\"sub3\">提交</button>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td>其他费用</td>\r\n          <td>\r\n             <el-input  :disabled=\"dis2==true?true:false\" @change=\"other\" type=\"number\" v-model=\"consts3\"></el-input>\r\n          </td>\r\n          <td>\r\n             <el-input  :disabled=\"dis2==true?true:false\" @change=\"other\" type=\"text\" v-model=\"remark3\"></el-input>\r\n          </td>\r\n          <td>\r\n            <button class=\"set\" @click=\"set4\">编辑</button>\r\n            <button class=\"sub\" @click=\"sub4\">提交</button>\r\n          </td>\r\n        </tr>\r\n        <tr>\r\n          <td style=\"font-weight:bold;border:0;\">合计</td>\r\n          <td style=\"border:0;font-weight:bold;text-align:left;padding-left:110px;\">{{all}}</td>\r\n          <td style=\"border:0\"></td>\r\n          <td></td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n  <!-- 计算净利润 -->\r\n  <div class=\"d-flex\" style=\"margin-top:40px;\">\r\n    <div class=\"net\">计算净利润</div>\r\n    <div class=\"net2\">{{net}}</div>\r\n  </div>\r\n  <!--  -->\r\n</div>\r\n</template>\r\n\r\n<script>\r\n//这里可以导入其他文件（比如：组件，工具js，第三方插件js，json文件，图片文件等等）\r\n//例如：import 《组件名称》 from '《组件路径》';\r\n\r\nexport default {\r\n  //import引入的组件需要注入到对象中才能使用\r\ncomponents: {},\r\ndata() {\r\n  \r\n  //这里存放数据\r\nreturn {\r\n  // 净利润\r\n  net:\"\",\r\n  // 其他费用\r\n  all:\"0\",\r\n  dis2:true,\r\n// 退税手续费\r\n// 备注\r\nbackinput:\"\",\r\nback:\"\",\r\n  // 中信保保费\r\n  // 备注\r\n  zxbinput:\"\",\r\n  zxb:\"\",\r\n  remark3:\"\",\r\n  //其他费用 \r\n  consts3:\"0\",\r\n  // 备注\r\n  remark2:\"\",\r\n  // 资金成本\r\n  consts2:\"0\",\r\n  // 备注\r\n  remark:\"\",\r\n  // 代理费用\r\n  consts:\"0\",\r\n// /////////////////////////////////////////\r\n  // 簽訂時間\r\n  time:\"2019-07-30\",\r\n  seconed:\"10:00\",\r\n  // 是否禁用\r\n  dis:true,\r\n  // table数据\r\n  details:[]\r\n\r\n};\r\n},\r\n//监听属性 类似于data概念\r\ncomputed: {},\r\n//监控data中的数据变化\r\nwatch: {\r\n  \r\n},\r\n//方法集合\r\nmethods: {\r\ntoThousands(num) {\r\n    var num = (num || 0).toString(), result = '';\r\n    while (num.length > 3) {\r\n        result = ',' + num.slice(-3) + result;\r\n        num = num.slice(0, num.length - 3);\r\n    }\r\n    if (num) { result = num + result; }\r\n    return result;\r\n},\r\n  // 其他费用\r\n  // 其他费用\r\n  sub4(){\r\n    this.dis2=false\r\n    console.log(this.remark3)\r\n    console.log(this.consts3)\r\n  },\r\n  set4(){\r\n    this.dis2=false\r\n  },\r\n  //  资金成本\r\n  sub3(){\r\n    this.dis2=false\r\n    console.log(this.remark2)\r\n    console.log(this.consts2)\r\n  },\r\n  set3(){\r\n    this.dis2=false\r\n  },\r\n  // 代理费\r\n  sub2(){\r\n    this.dis2=false\r\n    console.log(this.remark)\r\n    console.log(this.consts)\r\n  },\r\n  set2(){\r\n    this.dis2=false\r\n  },\r\n  // 、、、、、、、、、、、、、、、、、、、、、、、、、、、、、、、、、\r\n  // 导入按钮\r\n  load2(){\r\n    console.log(\"导入按钮\")\r\n  },\r\n  // 导出按钮\r\n  unload2(){\r\n    console.log(\"导出按钮\")\r\n  },\r\n  // 发票\r\n  invoice(event){\r\n    // console.log(\"值\"+event)\r\n    console.log(\"mm\"+event)\r\n    // console.log(i)\r\n    // e=this.details[i].has\r\n  },\r\n  // 退税\r\n  tax(e){\r\n    console.log(e)\r\n    // console.log(i)\r\n  },\r\n  // 备注\r\n  other(e){\r\n    console.log(e)\r\n  },\r\n  // 编辑\r\n  set(i){\r\n    console.log(\"编辑\")\r\n    console.log(i)\r\n    this.dis=false\r\n  },\r\n  // 提交\r\n  sub(i){\r\n    console.log(\"编辑\");\r\n    console.log(\"第\"+i+\"个\"+this.details[i].rate)\r\n    // this.details[i].has=this.details[i].has\r\n  },\r\n \r\n    \r\n},\r\n//生命周期 - 创建完成（可以访问当前this实例）\r\ncreated() {\r\n\r\n  /**\r\n   * 获取商品列表\r\n   */\r\n  var\tToken=window.localStorage.getItem('token')\r\n  var\tthat=this\r\n  var\tparams={\r\n  Token,\r\n  order_id:this.order_id\r\n  }\r\n  this.$ajax.post('/order/getGoodsList',params).then((res)=>{\r\n      console.log('请求结算汇总结果',res)\r\n    if(res.data.code==200){\r\n      this.details=this.data.data\r\n    }else{\r\n    alert(res.data.msg)\r\n  }\r\n    }).catch((err)=>{\r\n      console.log('请求失败',err)\r\n    })\r\n\r\n\r\n\r\n\r\n  for(var i in this.details){\r\n    if(this.details[i].other==\"\"){\r\n      this.details[i].other=\"-\"\r\n      continue\r\n    }\r\n  }\r\n\r\n    for(var i in this.details){\r\n      this.details[i].gross=parseInt(this.details[i].sell)+parseInt(this.details[i].tax)-parseInt(this.details[i].purchase)-parseInt(this.details[i].expense)-parseInt(this.details[i].othermoney)\r\n  }\r\n  // 中间逗号隔开\r\n// var num = (this.details[0].purchase|| 0).toString(), result = '';\r\n//     while (num.length > 3) {\r\n//         result = ',' + num.slice(-3) + result;\r\n//         num = num.slice(0, num.length - 3);\r\n//     }\r\n//     if (num) { result = num + result; }\r\n//    console.log(result)\r\n//    console.log(\"============================\")\r\nfor(var m in this.details){\r\n  var purchase = parseInt(this.details[m].purchase);\r\n  var sell = parseInt(this.details[m].sell);\r\n  var tax = parseInt(this.details[m].tax);\r\n  var expense = parseInt(this.details[m].expense);\r\n  var othermoney = parseInt(this.details[m].othermoney);\r\n  var gross = parseInt(this.details[m].gross);\r\n\r\n\tvar data1 = purchase.toFixed(2).replace(/\\d{1,3}(?=(\\d{3})+(\\.\\d*)?$)/g,'$&,');\r\n\tvar data2 = sell.toFixed(2).replace(/\\d{1,3}(?=(\\d{3})+(\\.\\d*)?$)/g,'$&,');\r\n\tvar data3 = tax.toFixed(2).replace(/\\d{1,3}(?=(\\d{3})+(\\.\\d*)?$)/g,'$&,');\r\n\tvar data4 = expense.toFixed(2).replace(/\\d{1,3}(?=(\\d{3})+(\\.\\d*)?$)/g,'$&,');\r\n\tvar data5 = othermoney.toFixed(2).replace(/\\d{1,3}(?=(\\d{3})+(\\.\\d*)?$)/g,'$&,');\r\n\tvar data6 = gross.toFixed(2).replace(/\\d{1,3}(?=(\\d{3})+(\\.\\d*)?$)/g,'$&,');\r\n      // return  $(\"#demo3\").text(data2);\r\n      this.details[m].purchase=data1\r\n      this.details[m].sell=data2\r\n      this.details[m].tax=data3\r\n      this.details[m].expense=data4\r\n      this.details[m].othermoney=data5\r\n      this.details[m].gross=data6\r\n      console.log(\"保留两位小数且有逗号\"+data1,data2,data3,data4,data5,data6)\r\n// 小数转为百分数\r\n var str=Number(this.details[m].rate*100).toFixed();\r\n            str+=\"%\";\r\n            console.log(\"百分数\"+str)\r\n            this.details[m].rate=str\r\n}\r\n},\r\n//生命周期 - 挂载完成（可以访问DOM元素）\r\nmounted() {\r\n\r\n},\r\nbeforeCreate() {\r\n  this.order_id=this.$route.query.order_id\r\n}, //生命周期 - 创建之前\r\nbeforeMount() {}, //生命周期 - 挂载之前\r\nbeforeUpdate() {\r\n  \r\n}, //生命周期 - 更新之前\r\nupdated() {\r\n  this.all=parseInt(this.consts)+parseInt(this.consts2)+parseInt(this.consts3)\r\n}, //生命周期 - 更新之后\r\nbeforeDestroy() {}, //生命周期 - 销毁之前\r\ndestroyed() {}, //生命周期 - 销毁完成\r\nactivated() {}, //如果页面有keep-alive缓存功能，这个函数会触发\r\n}\r\n</script>\r\n<style scoped>\r\n/* @import url(); 引入公共css类 */\r\n.receivingTitle{\r\n  width:160px;\r\nheight:46px;\r\nbackground:rgba(154,195,220,1);\r\nborder-radius:10px;\r\nfont-size:20px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:bold;\r\ncolor:rgba(255,255,255,1);\r\ntext-align: center;\r\nline-height: 46px;\r\nmargin-top:30px;\r\n}\r\n/* 商品信息 */\r\n.rtitle{\r\n  font-size:20px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:bold;\r\ncolor:rgba(51,51,51,1);\r\n/* margin-top:32px; */\r\nmargin-bottom:16px;\r\n}\r\ntable>thead td{\r\n  height:40px;\r\nbackground:rgba(237,237,237,1);\r\nfont-size:14px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:bold;\r\ncolor:rgba(51,51,51,1);\r\ntext-align: center;\r\nborder-right:1px solid #ccc; \r\n}\r\ntbody td {\r\n  text-align: center;\r\n  height:40px;\r\n  border-right:1px solid #ccc; \r\n  font-size:14px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:400;\r\ncolor:rgba(102,102,102,1);\r\n}\r\ntable>:nth-child(odd){\r\n  background:rgba(234,241,246,1);\r\n}\r\n.set{\r\n  width:60px;\r\nheight:20px;\r\nbackground:rgba(255,60,0,1);\r\nborder-radius:3px;\r\nfont-size:14px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:400;\r\ncolor:rgba(255,255,255,1);\r\nline-height:20px;\r\ntext-align: center;\r\nborder:0\r\n}\r\n.sub{\r\n  width:60px;\r\nheight:20px;\r\nbackground:rgba(183,77,238,1);\r\nborder-radius:3px;\r\nfont-size:14px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:400;\r\ncolor:rgba(255,255,255,1);\r\nline-height:20px;\r\ntext-align: center;\r\nborder:0;\r\nmargin-left: 5px;\r\n}\r\ntbody /deep/ .el-input__inner{\r\n  height: 40px;;\r\n  border:0;\r\n  text-align: center;\r\n  background: rgba(255,255,255,0);\r\n  color:#0666A4\r\n}\r\ntbody /deep/ .el-input.is-disabled .el-input__inner{\r\n  background:rgba(0,0,0,0)\r\n}\r\n.time{\r\n  font-size:20px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:bold;\r\ncolor:rgba(51,51,51,1);\r\n}\r\n.times{\r\n  font-size:20px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:bold;\r\ncolor:rgba(51,51,51,1);\r\n}\r\n.time+div{\r\n  font-size:20px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:bold;\r\ncolor:rgba(6,102,164,1);\r\nmargin-left:20px;\r\nmargin-top:1px;\r\n}\r\n.load{\r\n   width:100px;\r\nheight:30px;\r\nbackground:rgba(154,195,220,1);\r\nborder-radius:10px;\r\ntext-align: center;\r\nline-height: 30px;\r\nfont-size:14px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:400;\r\ncolor:rgba(255,255,255,1);\r\nborder:0;\r\n/* margin:auto 0;\r\nmargin-top:40px; */\r\n}\r\n/* 其他费用 */\r\n.other>:nth-child(even){\r\n  background:rgba(234,241,246,1);\r\n}\r\ntr :last-child{\r\n  border:0;\r\n}\r\n/* 计算净利润 */\r\n.net{\r\n  width:160px;\r\nheight:46px;\r\nbackground:rgba(154,195,220,1);\r\nborder-radius:10px;\r\ntext-align: center;\r\nline-height: 46px;\r\nfont-size:20px;\r\nfont-weight:bold;\r\ncolor:rgba(255,255,255,1);\r\n}\r\n.net2{\r\n  width:160px;\r\nheight:46px;\r\nbackground:rgba(237,237,237,1);\r\nborder-radius:10px;\r\ntext-align: center;\r\nline-height: 46px;\r\nfont-size:20px;\r\nfont-weight:bold;\r\ncolor:rgba(51,51,51,1);\r\nmargin-left:20px;\r\n}\r\n</style>"],"sourceRoot":"src\\components\\waimao\\orderlist"}]}