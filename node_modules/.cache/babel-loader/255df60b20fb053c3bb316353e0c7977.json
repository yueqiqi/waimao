{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\waimao\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\waimao\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\waimao\\vue_app_00\\src\\components\\waimao\\orderlist\\compact.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\waimao\\vue_app_00\\src\\components\\waimao\\orderlist\\compact.vue","mtime":1574835705393},{"path":"C:\\Users\\Administrator\\Desktop\\waimao\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\Administrator\\Desktop\\waimao\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"C:\\Users\\Administrator\\Desktop\\waimao\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//这里可以导入其他文件（比如：组件，工具js，第三方插件js，json文件，图片文件等等）\n//例如：import 《组件名称》 from '《组件路径》';\nexport default {\n  //import引入的组件需要注入到对象中才能使用\n  components: {},\n  data: function data() {\n    //这里存放数据\n    return {\n      // ??????????????????????????????????????????????????????????????????????\n      // 总监端合同签订\n      fileLists: [],\n      forms: {\n        name: \"\"\n      },\n      times: \"2019-07-30\",\n      seconeds: \"10:00\",\n      state: '',\n      // ??????????????????????????????????????????????????????????????????????\n      // 后台返回上传地址\n      files: [],\n      // 是否显示\n      hidden2: false,\n      hidden: true,\n      // 总经理审核\n      // 审核时间\n      managertime: \"2019-08-08\",\n      // 审核状态\n      managerstatu: \"通过\",\n      // 审核人\n      managerName: \"李胖子\",\n      // 总监审核\n      // 审核时间\n      shtime: \"2019-08-08\",\n      // 审核状态\n      statu: \"通过\",\n      // 审核人\n      shName: \"李胖子\",\n      // 上传文件地址\n      fileList: [],\n      time: \"2019-07-30\",\n      seconed: \"10:00\"\n    };\n  },\n  //监听属性 类似于data概念\n  computed: {},\n  //监控data中的数据变化\n  watch: {},\n  //方法集合\n  methods: {\n    /**\r\n     * 总监端合同签订方法\r\n     */\n    // 审核是否通过\n    subs: function subs() {\n      // 设置订单状态\n      var is_fail;\n      var state;\n      console.log(this.state);\n\n      if (this.state == '') {\n        is_fail = 0;\n      } else if (this.state == 1) {\n        is_fail == '';\n        state = 5;\n      } else {\n        is_fail = 1;\n      }\n\n      var Token = window.localStorage.getItem('token');\n      var that = this;\n      var params = {\n        Token: Token,\n        is_fail: is_fail,\n        order_id: this.order_id,\n        state: state\n      };\n      this.$ajax.post('/order/setOrderState', params).then(function (res) {\n        console.log('请求订单通过结果', res);\n\n        if (res.data.code == 200) {\n          alert(res.data.msg);\n        } else {\n          alert(res.data.msg);\n        }\n      }).catch(function (err) {\n        console.log('请求失败', err);\n      });\n    },\n    ////////////////////////////////////////////////////////////////////////////////\n    getFileName: function getFileName() {},\n    upsuc: function upsuc(e) {\n      console.log('上传成功', e);\n      this.files.push(e.data);\n      this.look = e.data.full_path;\n      console.log('查看的地址', this.look); // this.sp.push(e.data.path('_'))\n      // 为原数组添加新的下标\n\n      this.files.forEach(function (item, index) {\n        item.num = index + 1;\n        item.type = 5;\n      });\n    },\n    submitUpload: function submitUpload(file) {\n      this.$refs.upload.submit();\n    },\n    handleRemove: function handleRemove(file, fileList, e) {\n      console.log('删除的文件地址', file, '删除的文件路径', fileList, e); // this.files\n\n      for (var i in file) {\n        for (var m in this.files) {\n          if (file[i].name == this.files[m].file_name) {\n            this.files.splice(m, 1);\n          }\n        }\n      }\n    },\n    handlePreview: function handlePreview(file) {\n      // console.log('文件列表',file);\n      console.log('查看的文件地址', this.look);\n      window.open(this.look);\n    },\n    // 确认提交\n    sub: function sub() {\n      var _this = this;\n\n      /**\r\n       * 保存文件\r\n         */\n      var that = this;\n      console.log('订单id', that.order_id); // var\tparams={data:this.files}\n\n      this.$ajax.post('/tools/saveFile', {\n        order_id: that.order_id,\n        type: 2,\n        data: this.files\n      }).then(function (res) {\n        console.log('上传文件结果', res);\n\n        if (res.data.code == 200) {\n          /**\r\n           * 改变订单状态\r\n           */\n          var Token = window.localStorage.getItem('token');\n          var order_id = that.order_id;\n          var params = {\n            Token: Token,\n            state: 3,\n            order_id: that.order_id\n          };\n\n          _this.$ajax.post('/order/setOrderState', params).then(function (res) {\n            console.log('请求状态改变结果', res);\n\n            if (res.data.code == 200) {\n              _this.$message({\n                message: '上传成功',\n                type: 'success'\n              });\n            } else {\n              alert(res.data.msg);\n            }\n          }).catch(function (err) {\n            console.log('请求失败', err);\n          });\n          /**\r\n           * 改变订单状态\r\n           */\n\n        } else {\n          alert(res.data.msg);\n        }\n      }).catch(function (err) {\n        console.log('请求失败', err);\n      });\n      /**\r\n       * \r\n       */\n    }\n  },\n  //生命周期 - 创建完成（可以访问当前this实例）\n  created: function created() {\n    var _this2 = this;\n\n    var role_id = window.localStorage.getItem('role_id');\n\n    if (role_id == 3) {\n      var Token = window.localStorage.getItem('token');\n      var that = this;\n      var params = {\n        Token: Token,\n        order_id: this.order_id,\n        type: 3\n      };\n      this.$ajax.post('/tools/getFile', params).then(function (res) {\n        console.log('请求总监端文件列表结果', res);\n\n        if (res.data.code == 200) {\n          _this2.fileLists = res.data.data;\n        } else {\n          alert(res.data.msg);\n        }\n      }).catch(function (err) {\n        console.log('请求失败', err);\n      });\n    }\n  },\n  //生命周期 - 挂载完成（可以访问DOM元素）\n  mounted: function mounted() {},\n  beforeCreate: function beforeCreate() {\n    var role_id = window.localStorage.getItem('role_id');\n    this.role_id = role_id;\n    var order_id = this.$route.query.order_id;\n    console.log('合同亲低昂', order_id);\n    this.order_id = order_id;\n  },\n  //生命周期 - 创建之前\n  beforeMount: function beforeMount() {},\n  //生命周期 - 挂载之前\n  beforeUpdate: function beforeUpdate() {},\n  //生命周期 - 更新之前\n  updated: function updated() {},\n  //生命周期 - 更新之后\n  beforeDestroy: function beforeDestroy() {},\n  //生命周期 - 销毁之前\n  destroyed: function destroyed() {},\n  //生命周期 - 销毁完成\n  activated: function activated() {}\n};",{"version":3,"sources":["compact.vue"],"names":[],"mappings":"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","sourcesContent":["<!-- 合同签订 -->\r\n<template>\r\n<div>\r\n  <!-- 业务经理展示合同签订 -->\r\n  <div class='compact' v-if=\"role_id==2\">\r\n    <div class=\"compactTitle\">合同签订</div>\r\n    <div class=\"d-flex\">\r\n      <div class=\"time\">签订时间</div>\r\n      <div>{{time}}<span style=\"margin-left:10px;\">{{seconed}}</span></div>\r\n    </div>\r\n    <!-- 上传合同 -->\r\n    <div class=\"border\" v-show=\"hidden\">\r\n      <div class=\"uptitle\">上传内贸合同</div>\r\n      <div class=\"please\">请提交申请资料</div>\r\n      <div class=\"d-flex ol\">\r\n        <ol>\r\n          <li>境外采购合同</li>\r\n          <li>国内销售合同</li>\r\n        </ol>\r\n        <ol start=\"3\">\r\n          <li>代理合同</li>\r\n          <li>担保合同</li>\r\n        </ol>\r\n      </div>\r\n      <!-- 上传文件 -->\r\n      <div style=\"\">\r\n            <el-upload class=\"upload-demo\" ref=\"upload\" :on-change=\"getFileName\" action=\"http://192.168.0.140:8002/main/tools/upFile\" :on-preview=\"handlePreview\" :on-success=\"upsuc\" :on-remove=\"handleRemove\" :file-list=\"fileList\" :auto-upload=\"true\">\r\n            <el-button size=\"small\" type=\"primary\"  @click=\"submitUpload\">上传资料</el-button>\r\n            </el-upload>\r\n      <button class=\"btn mybtn\" @click=\"sub\">确认提交</button>\r\n      </div>\r\n      <!-- 提交按钮 -->\r\n<!--  -->\r\n    </div>\r\n    <!-- ============================================================ -->\r\n    <!-- 审核通过 -->\r\n    <div class=\"border2\" v-show=\"hidden2\">\r\n      <div class=\"uptitle\">上传内贸合同</div>\r\n      <div class=\"please\">请提交申请资料</div>\r\n      <div class=\"d-flex ol\">\r\n        <ol>\r\n          <li>境外采购合同</li>\r\n          <li>国内销售合同</li>\r\n        </ol>\r\n        <ol start=\"3\">\r\n          <li>代理合同</li>\r\n          <li>担保合同</li>\r\n        </ol>\r\n      </div>\r\n      <!-- 上传文件 -->\r\n      <div style=\"margin-top:-40px\">\r\n            <el-upload class=\"upload-demo\" ref=\"upload\" action=\"https://jsonplaceholder.typicode.com/posts/\" :on-preview=\"handlePreview\" :on-remove=\"handleRemove\" :file-list=\"fileList\" :auto-upload=\"false\">\r\n              <!-- <button class=\"upload\"><img style=\"width:10px;height:10px;\" src=\"../../../assets/waimao/icon/add.png\" alt=\"\">上传资料</button> -->\r\n            </el-upload>\r\n      </div>\r\n      <!-- 提交按钮 -->\r\n      <div class=\"zj\">总监审核</div>\r\n      <ul class=\"d-flex\">\r\n        <li style=\"margin-left:-40px;\">审核人：</li>\r\n        <li >{{shName}}</li>\r\n        <li style=\"margin-left:25px;\">审核状态：</li>\r\n        <li style=\"color:red;\">{{statu}}</li>\r\n        <li style=\"margin-left:10px;\">{{shtime}}</li>\r\n      </ul>\r\n      <div class=\"manager\">总监经理审核</div>\r\n      <ul class=\"d-flex\" style=\"\">\r\n        <li style=\"margin-left:-40px;\">审核人：</li>\r\n        <li >{{managerName}}</li>\r\n        <li style=\"margin-left:25px;\">审核状态：</li>\r\n        <li style=\"color:red;\">{{managerstatu}}</li>\r\n        <li style=\"margin-left:10px;\">{{managertime}}</li>\r\n      </ul>\r\n<!--  -->\r\n    </div>\r\n  </div>\r\n\r\n\r\n    <!-- ============================================================ -->\r\n<!-- 总监审核合同签订 -->\r\n<div class='compact' v-if=\"role_id==3\">\r\n    <div class=\"compactTitle\">合同签订</div>\r\n    <div class=\"d-flex\">\r\n      <div class=\"time\">签订时间</div>\r\n      <div>{{times}}<span style=\"margin-left:10px;\">{{seconeds}}</span></div>\r\n    </div>\r\n    <!-- 上传合同 -->\r\n    <div class=\"border\">\r\n      <div class=\"uptitle\">外贸合同</div>\r\n      <div class=\"please\">请提交申请资料</div>\r\n      <div class=\"d-flex ol\">\r\n        <ol>\r\n          <li>境外采购合同</li>\r\n          <li>国内销售合同</li>\r\n        </ol>\r\n        <ol start=\"3\">\r\n          <li>代理合同</li>\r\n          <li>担保合同</li>\r\n        </ol>\r\n      </div>\r\n      <!-- 上传文件 -->\r\n      <div style=\"\">\r\n        <ul class=\"el-upload-list el-upload-list--text uu\" v-for=\"(item,i) in fileLists\" :key=\"i\">\r\n          <li tabindex=\"0\" >\r\n            <router-link to=\"item.url\" class=\"el-upload-list__item-name\">\r\n              <i class=\"el-icon-document\">{{item.name}}</i>\r\n            </router-link>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      <!-- 提交按钮 -->\r\n\r\n<!--  -->\r\n    </div>\r\n    <div class=\"d-flex\">\r\n      <div style=\"margin-top:20px;margin-right:18px;\">\r\n        <span style=\"font-size:16px;color:#333;margin-right:10px;\">审核结果</span>\r\n        <el-select v-model=\"state\" placeholder=\"请选择审核状态\">\r\n          <el-option label=\"通过\" value=\"1\"></el-option>\r\n          <el-option label=\"不通过\" value=\"2\"></el-option>\r\n        </el-select>\r\n      </div>\r\n      <div><button class=\"sub\" @click=\"subs\">确认提交</button></div>\r\n    </div>\r\n</div>\r\n\r\n\r\n</div>\r\n</template>\r\n\r\n<script>\r\n//这里可以导入其他文件（比如：组件，工具js，第三方插件js，json文件，图片文件等等）\r\n//例如：import 《组件名称》 from '《组件路径》';\r\n\r\nexport default {\r\n//import引入的组件需要注入到对象中才能使用\r\ncomponents: {},\r\ndata() {\r\n//这里存放数据\r\nreturn {\r\n\r\n\r\n\r\n  // ??????????????????????????????????????????????????????????????????????\r\n  // 总监端合同签订\r\n  fileLists: [],\r\n    forms:{\r\n      name:\"\",\r\n    },\r\n    times:\"2019-07-30\",\r\n    seconeds:\"10:00\",\r\n    state:'',\r\n  // ??????????????????????????????????????????????????????????????????????\r\n    // 后台返回上传地址\r\n  files:[],\r\n  // 是否显示\r\n  hidden2:false,\r\n  hidden:true,\r\n  // 总经理审核\r\n  // 审核时间\r\n  managertime:\"2019-08-08\",\r\n  // 审核状态\r\n  managerstatu:\"通过\",\r\n  // 审核人\r\n  managerName:\"李胖子\",\r\n  // 总监审核\r\n  // 审核时间\r\n  shtime:\"2019-08-08\",\r\n  // 审核状态\r\n  statu:\"通过\",\r\n  // 审核人\r\n  shName:\"李胖子\",\r\n  // 上传文件地址\r\n   fileList: [],\r\ntime:\"2019-07-30\",\r\nseconed:\"10:00\"\r\n};\r\n},\r\n//监听属性 类似于data概念\r\ncomputed: {},\r\n//监控data中的数据变化\r\nwatch: {},\r\n//方法集合\r\nmethods: {\r\n\r\n/**\r\n * 总监端合同签订方法\r\n */\r\n// 审核是否通过\r\nsubs(){\r\n  // 设置订单状态\r\n  var is_fail\r\n  var state\r\n  console.log(this.state)\r\n  if(this.state==''){\r\n    is_fail=0\r\n  }else if(this.state==1){\r\n    is_fail==''\r\n    state=5\r\n  }else{\r\n    is_fail=1\r\n  }\r\n  var\tToken=window.localStorage.getItem('token')\r\n  var\tthat=this\r\n  var\tparams={\r\n  Token,\r\n  is_fail,\r\n  order_id:this.order_id,\r\n  state,\r\n  }\r\n  this.$ajax.post('/order/setOrderState',params).then((res)=>{\r\n      console.log('请求订单通过结果',res)\r\n    if(res.data.code==200){\r\n      alert(res.data.msg)\r\n    }else{\r\n    alert(res.data.msg)\r\n  }\r\n    }).catch((err)=>{\r\n      console.log('请求失败',err)\r\n    })\r\n},\r\n////////////////////////////////////////////////////////////////////////////////\r\n\r\n\r\ngetFileName(){\r\n  \r\n},\r\nupsuc(e){\r\n  console.log('上传成功',e)\r\n  this.files.push(e.data)\r\n  this.look=e.data.full_path\r\n  console.log('查看的地址',this.look)\r\n  // this.sp.push(e.data.path('_'))\r\n    // 为原数组添加新的下标\r\n  this.files.forEach((item,index)=> {\r\n    item.num = index+1;\r\n    item.type=5\r\n  })\r\n},\r\nsubmitUpload(file) {\r\n  this.$refs.upload.submit();\r\n},\r\nhandleRemove(file, fileList,e) {\r\n  console.log('删除的文件地址',file,'删除的文件路径', fileList,e);\r\n  // this.files\r\n  for(var i in file){\r\n    for(var m in this.files){\r\n      if(file[i].name==this.files[m].file_name){\r\n        this.files.splice(m,1)\r\n      }\r\n    }\r\n  }\r\n},\r\nhandlePreview(file) {\r\n  // console.log('文件列表',file);\r\n  console.log('查看的文件地址',this.look)\r\n  window.open(this.look)\r\n},\r\n  // 确认提交\r\n  sub(){\r\n    /**\r\n     * 保存文件\r\n       */\r\n      var\tthat=this\r\n    console.log('订单id',that.order_id)\r\n      // var\tparams={data:this.files}\r\n      this.$ajax.post('/tools/saveFile',({order_id:that.order_id,type:2,data:this.files})).then((res)=>{\r\n          console.log('上传文件结果',res)\r\n        if(res.data.code==200){\r\n          /**\r\n           * 改变订单状态\r\n           */\r\n          var\tToken=window.localStorage.getItem('token')\r\n          var order_id=that.order_id\r\n          var\tparams={\r\n          Token,\r\n          state:3,\r\n          order_id:that.order_id\r\n          }\r\n          this.$ajax.post('/order/setOrderState',params).then((res)=>{\r\n              console.log('请求状态改变结果',res)\r\n            if(res.data.code==200){\r\n              this.$message({\r\n                message: '上传成功',\r\n                type: 'success'\r\n              });\r\n            }else{\r\n            alert(res.data.msg)\r\n          }\r\n            }).catch((err)=>{\r\n              console.log('请求失败',err)\r\n            })\r\n          /**\r\n           * 改变订单状态\r\n           */\r\n          \r\n        }else{\r\n        alert(res.data.msg)\r\n      }\r\n        }).catch((err)=>{\r\n          console.log('请求失败',err)\r\n        })\r\n        /**\r\n         * \r\n         */\r\n\r\n  },\r\n\r\n},\r\n//生命周期 - 创建完成（可以访问当前this实例）\r\ncreated() {\r\n  var role_id=window.localStorage.getItem('role_id')\r\n  if(role_id==3){\r\n    var\tToken=window.localStorage.getItem('token')\r\n    var\tthat=this\r\n    var\tparams={\r\n    Token,\r\n    order_id:this.order_id,\r\n    type:3\r\n    }\r\n    this.$ajax.post('/tools/getFile',params).then((res)=>{\r\n        console.log('请求总监端文件列表结果',res)\r\n      if(res.data.code==200){\r\n        this.fileLists=res.data.data\r\n      }else{\r\n      alert(res.data.msg)\r\n    }\r\n      }).catch((err)=>{\r\n        console.log('请求失败',err)\r\n      })\r\n  }\r\n},\r\n//生命周期 - 挂载完成（可以访问DOM元素）\r\nmounted() {\r\n\r\n},\r\nbeforeCreate() {\r\n  var role_id=window.localStorage.getItem('role_id')\r\n  this.role_id=role_id\r\n  var order_id=this.$route.query.order_id\r\n  console.log('合同亲低昂',order_id)\r\n  this.order_id=order_id\r\n}, //生命周期 - 创建之前\r\nbeforeMount() {}, //生命周期 - 挂载之前\r\nbeforeUpdate() {}, //生命周期 - 更新之前\r\nupdated() {}, //生命周期 - 更新之后\r\nbeforeDestroy() {}, //生命周期 - 销毁之前\r\ndestroyed() {}, //生命周期 - 销毁完成\r\nactivated() {}, //如果页面有keep-alive缓存功能，这个函数会触发\r\n}\r\n</script>\r\n<style scoped>\r\n.ol{\r\n  font-size:14px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:400;\r\ncolor:rgba(0,0,0,1);\r\nline-height:29px;\r\nmargin-left:-23px;\r\n}\r\n/* 上传按钮 */\r\n.sub{\r\n  width:100px;\r\nheight:30px;\r\nbackground:rgba(255,102,0,1);\r\nborder-radius:10px;\r\nfont-size:14px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:400;\r\ncolor:rgba(255,255,255,1);\r\ntext-align: center;\r\nline-height: 30px;\r\nmargin-top:19px;\r\nborder:0\r\n}\r\n\r\nul li{\r\n  list-style: none;\r\n  font-size:14px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:400;\r\ncolor:rgba(0,0,0,1);\r\nmargin-top:-10px;\r\n}\r\n\r\n.uu{\r\n  margin-left:0!important;\r\n}\r\n.upload{\r\n  width:100px;\r\n  height:30px;\r\n  background:rgba(154,195,220,1);\r\n  border-radius:10px;\r\n  font-size:14px;\r\n  font-family:Microsoft YaHei;\r\n  font-weight:400;\r\n  color:rgba(255,255,255,1);\r\n  border:0;\r\n  }\r\n  /deep/ .el-upload-list__item{\r\n  width:300px;\r\n}\r\n.el-upload-list{\r\n  margin-bottom:23px;\r\n}\r\n\r\n/deep/ .el-select{\r\n  width:210px;\r\nheight:30px;\r\nbackground:rgba(237,237,237,1);\r\nborder-radius:10px;\r\n}\r\n/deep/ .el-input__inner{\r\n  width:210px;\r\nheight:30px;\r\nbackground:rgba(237,237,237,1);\r\nborder-radius:10px;\r\n}\r\n/deep/ .el-input__suffix{\r\n  top:5px;\r\n}\r\n/* @import url(); 引入公共css类 */\r\n.compactTitle{\r\n  width:160px;\r\nheight:46px;\r\nbackground:rgba(154,195,220,1);\r\nborder-radius:10px;\r\ntext-align: center;\r\nline-height: 46px;\r\nfont-size:20px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:bold;\r\ncolor:rgba(255,255,255,1);\r\nmargin-top:29px;\r\nmargin-bottom:29px;\r\n}\r\n.time{\r\n  font-size:20px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:bold;\r\ncolor:rgba(51,51,51,1);\r\n}\r\n.time+div{\r\n  font-size:20px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:bold;\r\ncolor:rgba(6,102,164,1);\r\nmargin-left:20px;\r\nmargin-top:1px;\r\n}\r\n/* 上传内贸 */\r\n.border{\r\n  width:400px;\r\nheight:320px;\r\nborder:1px solid rgba(6,102,164,1);\r\nborder-radius:10px;\r\npadding-left:30px;\r\nmargin-top:30px;\r\n}\r\n.upload{\r\n  width:100px;\r\n  height:30px;\r\n  background:rgba(154,195,220,1);\r\n  border-radius:10px;\r\n  font-size:14px;\r\n  font-family:Microsoft YaHei;\r\n  font-weight:400;\r\n  color:rgba(255,255,255,1);\r\n  border:0;\r\n  }\r\n  /deep/ .el-upload-list__item{\r\n  width:300px;\r\n}\r\n/* 上传贸易合同文字 */\r\n.uptitle{\r\n  font-size:20px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:bold;\r\ncolor:rgba(6,102,164,1);\r\npadding-top:34px;\r\n}\r\n/* 提示文字 */\r\n.please{\r\n  font-size:14px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:400;\r\ncolor:rgba(255,0,0,1);\r\nmargin-top:19px;\r\n}\r\n/* ol */\r\n.ol{\r\n  font-size:14px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:400;\r\ncolor:rgba(0,0,0,1);\r\nline-height:29px;\r\nmargin-left:-23px;\r\n}\r\n/* 上传按钮 */\r\n.mybtn{\r\n  width:100px;\r\nheight:30px;\r\nbackground:rgba(255,102,0,1);\r\nborder-radius:10px;\r\nfont-size:14px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:400;\r\ncolor:rgba(255,255,255,1);\r\ntext-align: center;\r\nline-height: 30px;\r\nmargin-top:19px;\r\n}\r\n/* 审核通过 */\r\n.border2{\r\n  width:400px;\r\n  height:389px;\r\n  border:1px solid rgba(6,102,164,1);\r\n  border-radius:10px;\r\n  padding-left:30px;\r\nmargin-top:30px;\r\n}\r\n/* 总监是=审核 */\r\n.zj{\r\n  font-size:20px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:bold;\r\ncolor:rgba(6,102,164,1);\r\nmargin-top:29px;\r\n}\r\n\r\nul li{\r\n  list-style: none;\r\n  font-size:14px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:400;\r\ncolor:rgba(0,0,0,1);\r\nmargin-top:-10px;\r\n}\r\n/* 总经理审核 */\r\n.manager{\r\n  font-size:20px;\r\nfont-family:Microsoft YaHei;\r\nfont-weight:bold;\r\ncolor:rgba(6,102,164,1);\r\nmargin-top:27px;\r\n}\r\n</style>"],"sourceRoot":"src\\components\\waimao\\orderlist"}]}