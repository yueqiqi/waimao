{"remainingRequest":"C:\\Users\\Administrator\\Desktop\\醉品茶城\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Administrator\\Desktop\\醉品茶城\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Administrator\\Desktop\\醉品茶城\\vue_app_00\\src\\components\\zuipin\\car.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\Administrator\\Desktop\\醉品茶城\\vue_app_00\\src\\components\\zuipin\\car.vue","mtime":1565764898736},{"path":"C:\\Users\\Administrator\\Desktop\\醉品茶城\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"C:\\Users\\Administrator\\Desktop\\醉品茶城\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"C:\\Users\\Administrator\\Desktop\\醉品茶城\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      list: [],\n      num: 1,\n      n: 0,\n      price: 0,\n      radio: \"1\"\n    };\n  },\n  created: function created() {\n    this.loadMore(); // this.change();\n  },\n  methods: {\n    change: function change() {\n      this.n = 0;\n\n      for (var a = 0; a < this.list.length; a++) {\n        if (this.list[a].cb) {\n          this.n += this.list[a].count;\n          this.price = this.list[a].price * this.n;\n        }\n      }\n    },\n    // sub(index){\n    //   if(this.num>1){\n    //     this.num--;      \n    //   }else{\n    //     this.$notify({\n    //     title: '提示',\n    //     message: '商品数量至少为1',\n    //     offset: 100\n    //   });\n    //   }\n    // },\n    // add(index){\n    //   this.num+=1;     \n    //    },\n    delAll: function delAll() {\n      var _this = this;\n\n      //删除多个商品 1,2,3\n      //1:创建变量保存空字符串\n      var str = \"\"; //2:创建循环拼接字符串内容\n\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = this.list[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var item = _step.value;\n\n          if (item.cb) {\n            str += item.id + \",\";\n          }\n        } //截取最后逗号之前内容\n\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      str = str.substring(0, str.length - 1); //3:判断如果用户没选商品提示\n\n      if (str.length == 0) {\n        this.$toast(\"请选中商品\");\n        return;\n      } //4:发送ajax请求404\n\n\n      var url = \"delAll\";\n      var obj = {\n        ids: str\n      };\n      this.axios.get(url, {\n        params: obj\n      }).then(function (result) {\n        //获取没有删除商品\n        _this.loadMore();\n      }); //5:重新加载数据\n    },\n    delItem: function delItem(e) {\n      var _this2 = this;\n\n      //1:获取当前商品id\n      var id = e.target.dataset.id; //2:显示交互确认框 27\n      //3:如果用户选择 \"确认\"\n\n      this.$confirm(\"是否删除这件商品\", \"提示\", {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning',\n        center: true\n      }).then(function (action) {\n        _this2.$message({\n          type: 'success',\n          message: '删除成功!'\n        });\n\n        var url = \"delItem\";\n        var obj = {\n          id: id\n        };\n\n        _this2.axios.get(url, {\n          params: obj\n        }).then(function (result) {\n          //重新加载数据相当刷新\n          _this2.loadMore();\n        });\n      }).catch(function (err) {\n        _this2.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n\n        return;\n      }); //4:发送ajax删除数据\n      //5:如果用户选择 \"取消\"\n    },\n    selectAll: function selectAll(e) {\n      //全选按钮状态\n      var cb = e.target.checked; //依据状态修改列表cb\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.list[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var item = _step2.value;\n          item.cb = cb;\n        }\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n    },\n    loadMore: function loadMore() {\n      var _this3 = this;\n\n      this.$store.commit(\"clear\"); //1:创建url\n\n      var url = \"cart\"; //2:发送ajax请求\n\n      this.axios.get(url).then(function (result) {\n        //this.list = //result.data.data;\n        //1:获取服务器数组\n        var rows = result.data.data; //2:创建循环为数组中每个//对象添加cb属性\n        //cb控制商品前复选框\n\n        var _iteratorNormalCompletion3 = true;\n        var _didIteratorError3 = false;\n        var _iteratorError3 = undefined;\n\n        try {\n          for (var _iterator3 = rows[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n            var item = _step3.value;\n            //2.1:添加cb属性\n            item.cb = false; //2.2:更新购物车数量\n\n            _this3.$store.commit(\"increment\");\n          } //3:将新数据保存\n\n        } catch (err) {\n          _didIteratorError3 = true;\n          _iteratorError3 = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n              _iterator3.return();\n            }\n          } finally {\n            if (_didIteratorError3) {\n              throw _iteratorError3;\n            }\n          }\n        }\n\n        _this3.list = rows;\n      });\n    }\n  }\n};",{"version":3,"sources":["car.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"cart\" style=\"min-width:1000px;margin-top:20px;margin-bottom:90px;\">\r\n  <!--Cart.vue-->\r\n    <div class=\"selectAll\">\r\n     <!--全选-->\r\n     <input style=\"float:left;margin-top:10px;\" type=\"checkbox\" @change=\"selectAll\"/>\r\n     <span style=\"float:left;margin-top:9px;margin-left:5px;\">全选</span>\r\n    <!-- <el-checkbox style=\"float:left;margin-top:10px;margin-left:10px;\" @change=\"selectAll\">全选</el-checkbox> -->\r\n    <div style=\"min-width:1500px;\">\r\n      <div  class=\"d1\" style=\"margin-left:200px;margin-right:300px;\">商品名称</div>\r\n       <div class=\"d1\" style=\"width:50px\">价格</div>\r\n       <div class=\"d1\" style=\"width:50px;margin-left:150px;\">数量</div>\r\n       <div class=\"d1\" style=\"width:50px\">小计</div>\r\n       <div class=\"d1\" style=\"width:50px\">操作</div>\r\n    </div>\r\n       \r\n    </div><br><br><br><br>\r\n    <div class=\"cart-item\" v-for=\"(item,i) of list\" :key=\"i\">\r\n     <!--商品列表 15:41-->\r\n     <div class=\"leftImgText\">\r\n       <!-- <el-checkbox v-model=\"item.cb\"></el-checkbox> -->\r\n       <input type=\"checkbox\" v-model=\"item.cb\"/>\r\n       <img class=\"img\" :src=\"'http://127.0.0.1:3000/cart/'+item.img\" />\r\n       <p class=\"title\">{{item.title}}</p>\r\n       <div class=\"price\">\r\n          <span>\r\n            {{\"￥\"+item.price}}\r\n          </span>\r\n       </div>\r\n\r\n       <div style=\"width:130px;text-align:center;margin-left:98px;border:box-sizing\">\r\n         <!-- <button @click=\"sub\" class=\"sl\">-</button>\r\n         <span class=\"sc\">{{num}}</span>\r\n         <button @click=\"add\" class=\"sr\">+</button> -->\r\n         <el-input-number  @change=\"change\" v-model=\"item.count\" :min=\"1\" :max=\"99\" label=\"描述文字\"></el-input-number>\r\n       </div>\r\n\r\n       <div style=\"width:100px;margin-left:83px;\">\r\n         <p class=\"total\">{{\"￥\"+item.price*item.count}}</p>\r\n       </div>\r\n     </div>\r\n     <el-row style=\"margin-right:162px;\">\r\n       <el-button type=\"danger\" icon=\"el-icon-delete\" circle :data-id=\"item.id\" @click=\"delItem\"></el-button>\r\n     </el-row>\r\n     <!-- <mt-button :data-id=\"item.id\" @click=\"delItem\"\r\n     >删除</mt-button> -->\r\n    </div>\r\n    <div style=\"display:flex;justfiy-content:left\">\r\n    <!--删除选中商品-->\r\n      <!-- <mt-button style=\"backgrond:#ff3600\" @click=\"delAll\">\r\n       删除选中商品\r\n      </mt-button> -->\r\n      <input style=\"float:left;margin-top:30px;\" type=\"checkbox\" @change=\"selectAll\"/>\r\n     <span style=\"float:left;margin-top:29px;margin-left:5px;\">全选</span>\r\n      <el-button style=\"margin-top:20px;margin-left:10px;\" type=\"danger\" @click=\"delAll\">删除选中商品</el-button>\r\n      <h3 style=\"margin-top:28px;margin-left:10px;\">\r\n        已选择\r\n        <span style=\"color:red\">\r\n        <!-- {{$store.getters.\r\n        getCartCount}} -->\r\n        {{n}}\r\n        </span>\r\n      件商品\r\n      </h3>\r\n      <div style=\"margin-top:30px;margin-left:700px;\">\r\n        <span style=\"float:left;font-size:20px\">总价(全场满59包邮)：</span>\r\n        <h2 style=\"color:#ff3600;float:left\">￥{{price}}</h2>\r\n      </div>\r\n<router-link to=\"index\">\r\n        <el-button type=\"danger\" style=\"margin-top:20px;margin-left:10px;background-color:#ff3600;width:100px;\">去结算</el-button>\r\n</router-link>\r\n    </div>\r\n  </div>  \r\n</template>\r\n<script>\r\n  export default {\r\n    data(){\r\n      return {\r\n        list:[],\r\n        num:1,\r\n        n:0,\r\n        price:0,\r\n        radio:\"1\",\r\n      }\r\n    },\r\n    created() {\r\n      this.loadMore();\r\n      // this.change();\r\n    },\r\n    methods:{\r\n     change(){\r\n    this.n=0;\r\n    for(var a=0;a<this.list.length;a++){      \r\n       if(this.list[a].cb){\r\n        this.n+=this.list[a].count\r\n        this.price= this.list[a].price*this.n \r\n            }\r\n        }\r\n     },\r\n      // sub(index){\r\n      //   if(this.num>1){\r\n      //     this.num--;      \r\n      //   }else{\r\n      //     this.$notify({\r\n      //     title: '提示',\r\n      //     message: '商品数量至少为1',\r\n      //     offset: 100\r\n      //   });\r\n      //   }\r\n      // },\r\n      // add(index){\r\n      //   this.num+=1;     \r\n      //    },\r\n     delAll(){\r\n      //删除多个商品 1,2,3\r\n      //1:创建变量保存空字符串\r\n      var str = \"\";\r\n      //2:创建循环拼接字符串内容\r\n      for(var item of this.list){\r\n         if(item.cb){\r\n           str += item.id+\",\"\r\n         }\r\n      }\r\n      //截取最后逗号之前内容\r\n      str = str.substring(0,str.length-1);\r\n      //3:判断如果用户没选商品提示\r\n      if(str.length==0){\r\n       this.$toast(\"请选中商品\");\r\n       return;\r\n      }\r\n      //4:发送ajax请求404\r\n      var url = \"delAll\";\r\n      var obj = {ids:str};\r\n      this.axios.get(url,{params:obj}).then(result=>{\r\n        //获取没有删除商品\r\n        this.loadMore();\r\n      });\r\n      //5:重新加载数据\r\n     },\r\n     delItem(e){\r\n     //1:获取当前商品id\r\n     var id = e.target.dataset.id;\r\n     //2:显示交互确认框 27\r\n     //3:如果用户选择 \"确认\"\r\n     this.$confirm(\"是否删除这件商品\",\"提示\",{  confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning',\r\n          center: true}).then(action=>{\r\n            this.$message({\r\n            type: 'success',\r\n            message: '删除成功!'\r\n          });\r\n        var url = \"delItem\";\r\n        var obj = {id:id};\r\n        this.axios.get(url,{params:obj}).then(result=>{\r\n          //重新加载数据相当刷新\r\n          this.loadMore();\r\n        })\r\n     }).catch(err=>{\r\n        this.$message({\r\n            type: 'info',\r\n            message: '已取消删除'\r\n          });\r\n       return;\r\n     })\r\n\r\n     //4:发送ajax删除数据\r\n     //5:如果用户选择 \"取消\"\r\n      },\r\n      selectAll(e){\r\n     //全选按钮状态\r\n     var cb =  e.target.checked;\r\n     //依据状态修改列表cb\r\n     for(var item of this.list){\r\n        item.cb = cb;\r\n     }\r\n       \r\n\r\n      },\r\n     loadMore(){\r\n     this.$store.commit(\"clear\");\r\n        //1:创建url\r\n        var url = \"cart\";\r\n        //2:发送ajax请求\r\n        this.axios.get(url).then(result=>{\r\n          //this.list = //result.data.data;\r\n          //1:获取服务器数组\r\n          var rows = result.data.data;\r\n          //2:创建循环为数组中每个//对象添加cb属性\r\n          //cb控制商品前复选框\r\n          for(var item of rows){\r\n           //2.1:添加cb属性\r\n           item.cb = false;\r\n           //2.2:更新购物车数量\r\n           this.$store.commit(\"increment\");\r\n          }\r\n          //3:将新数据保存\r\n          this.list = rows;\r\n        })\r\n      }\r\n    }\r\n  }  \r\n</script>\r\n<style scoped>\r\n*{margin:0;padding:0}\r\n.d1{list-style: none;margin-left:120px;margin-top:9px;float:left;}\r\n/*最外层弹性布局*/\r\n .cart-item{\r\n  display:flex;/*弹性布局*/\r\n  justify-content:space-between;\r\n  align-items:center;/*垂直居中*/\r\n  border-bottom:1px solid #ccc;\r\n }\r\n .leftImgText{\r\n   /*默认子元素水平对齐*/\r\n   display:flex;\r\n   align-items:center;/*垂直居中*/\r\n }\r\n .leftImgText img{\r\n   width:70px;\r\n   height:70px;\r\n }\r\n .title{width:478px;}\r\n .price{\r\n   margin-left:98px;width:50px;\r\n }\r\n input{width:20px;height:20px;border:1px solid #ccc;margin-left:40px;}\r\n .img{margin:20px 0;margin-left:50px;margin-right: 30px;}\r\n /* 数量样式 */\r\n .sl,.sr{    width: 20px;\r\n    height: 32px;\r\n    text-align: center;\r\n    color: #666;\r\n    cursor: pointer;\r\n    font-size: 14px;\r\n    background: #fff;\r\n    border: 1px solid #aaa}\r\n.sc{width: 42px;display:inline-block;\r\n    height: 30px;\r\n   border:1px solid #ccc;\r\n    line-height: 28px;\r\n    color: #666;\r\n    font-size: 14px;margin:1px 4px;\r\n    }\r\n/* 小计 */\r\n.total{color:#c00000}\r\n</style>\r\n"],"sourceRoot":"src\\components\\zuipin"}]}